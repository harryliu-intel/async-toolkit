# vim:et:sw=4:syntax=make:ts=4:tw=79:

SDK_TESTLIB_SRC =\
../testing/lib/testing.c \
../testing/lib/testing_attr.c \
../testing/lib/testing_stat.c \
../testing/lib/testing_packet.c \
../testing/lib/testing_cfg.c \
../testing/lib/testing_mac.c \
../testing/lib/testing_routes.c \
../testing/lib/testing_script.c

SDK_TESTLIB_OBJ := $(SDK_TESTLIB_SRC:.c=.o)
SDK_TESTLIB = ../build/libtesting.a

$(SDK_TESTLIB) : $(SDK_TESTLIB_OBJ)
	$(AR) r $@ $^

ifeq ($(shell test -d ../testing && echo 1),1)
  # so that the installer will know to install us
  INSTALL_TARGETS += install-sdk-test-lib
endif

install-sdk-test-lib : install-base $(SDK_TESTLIB)
	@echo Copying SDK test library
	mkdir -p $(INSTALL_DIRECTORY)/lib
	cp $(SDK_TESTLIB) $(INSTALL_DIRECTORY)/lib
	chmod -R a+rx $(INSTALL_DIRECTORY)/lib
