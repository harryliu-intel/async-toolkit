// Autogenerated Jamon implementation
// C:/Users/mhesseli/Documents/Perforce/rrc-4/reg-main/shared/java/src/./com/fulcrummicro/hw/verification/chip/mgmt/registers/templates/UVM.jamon

package com.fulcrummicro.hw.verification.chip.mgmt.registers.templates;

// 8, 1
import java.io.File;
// 9, 1
import java.lang.Math;
// 10, 1
import java.lang.StringBuilder;
// 11, 1
import java.util.ArrayList;
// 12, 1
import java.util.Collections;
// 13, 1
import java.util.EnumMap;
// 14, 1
import java.util.HashMap;
// 15, 1
import java.util.Iterator;
// 16, 1
import java.util.Map;
// 17, 1
import java.util.List;
// 18, 1
import java.util.Set;
// 19, 1
import java.util.TreeSet;
// 20, 1
import java.util.regex.Pattern;
// 21, 1
import com.fulcrummicro.hw.verification.chip.mgmt.registers.Register;
// 22, 1
import com.fulcrummicro.hw.verification.chip.mgmt.registers.RegisterBase;
// 23, 1
import com.fulcrummicro.hw.verification.chip.mgmt.registers.RegisterField;
// 24, 1
import com.fulcrummicro.hw.verification.chip.mgmt.registers.RegisterFieldComparator;
// 25, 1
import com.fulcrummicro.hw.verification.chip.mgmt.registers.RegisterType;
// 26, 1
import com.fulcrummicro.hw.verification.lib.bitarray.LittleEndianBitArray;
// 27, 1
import com.fulcrummicro.hw.verification.lib.testcase.ResetType.ResetDomain;
// 28, 1
import com.fulcrummicro.util.misc.Utility;

public class UVMImpl
  extends com.fulcrummicro.util.jamon.timestampImpl
  implements com.fulcrummicro.hw.verification.chip.mgmt.registers.templates.UVM.Intf

{
  private final String output;
  private final List<RegisterBase> bases;
  private final boolean coverage;
  // 508, 1
  
enum DimInfo { OFFSET, SIZE, STRIDE };
static List<RegisterField> fields;
static LittleEndianBitArray def;
static Pattern FV_RESERVED = Pattern.compile("reserved\\d+",
                                             Pattern.CASE_INSENSITIVE);
static StringBuilder indent = new StringBuilder();
static String[] FV_SV_INDEX = new String[]{"i", "j", "k"};
static int FV_SV_INDENT = 4;

  protected static com.fulcrummicro.hw.verification.chip.mgmt.registers.templates.UVM.ImplData __jamon_setOptionalArguments(com.fulcrummicro.hw.verification.chip.mgmt.registers.templates.UVM.ImplData p_implData)
  {
    com.fulcrummicro.util.jamon.timestampImpl.__jamon_setOptionalArguments(p_implData);
    return p_implData;
  }
  public UVMImpl(org.jamon.TemplateManager p_templateManager, com.fulcrummicro.hw.verification.chip.mgmt.registers.templates.UVM.ImplData p_implData)
  {
    super(p_templateManager, __jamon_setOptionalArguments(p_implData));
    output = p_implData.getOutput();
    bases = p_implData.getBases();
    coverage = p_implData.getCoverage();
  }
  
  @Override protected void child_render_1(final java.io.Writer jamonWriter)
    throws java.io.IOException
  {
    // 518, 1
    jamonWriter.write("// vim:et:sw=4:ts=4:tw=79:\n\n//-----------------------------------------------------------------------------\n// File:            ");
    // 521, 21
    org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(new File(output).getName()), jamonWriter);
    // 521, 53
    jamonWriter.write("\n// Creation Date:   November 29, 2012\n// Last Updated:    ");
    // 523, 21
    {
      // 523, 21
      __jamon_innerUnit__timestamp(jamonWriter);
    }
    // 523, 37
    jamonWriter.write("\n// Description:     UVM (Standard Universal Verification Methodology) register\n//                  classes");
    // 525, 28
    if (coverage )
    {
      // 525, 44
      jamonWriter.write(" with coverage support");
    }
    // 525, 72
    jamonWriter.write("\n//\n// INTEL TOP SECRET\n// Copyright ");
    // 528, 14
    {
      // 528, 14
      __jamon_innerUnit__copyright_year(jamonWriter, 2012 );
    }
    // 528, 55
    jamonWriter.write(" Intel Corporation\n// All Rights Reserved.\n//\n// THIS FILE IS AUTOMATICALLY GENERATED - DO NOT MODIFY.\n//-----------------------------------------------------------------------------\n\npackage ");
    // 534, 9
    {
      // 534, 9
      __jamon_innerUnit____package(jamonWriter, output );
    }
    // 534, 39
    jamonWriter.write(";\n\nimport uvm_pkg::*;\n`include \"uvm_macros.svh\"\n\n");
    // 540, 1
    
Set<ResetDomain> domains = new TreeSet<ResetDomain>();
for (RegisterBase b : bases) {
    for (Register r : b.getRegisters()) {
        domains.addAll(r.getResetType(0).getDomains());
    }
}
Iterator<ResetDomain> domainIterator = domains.iterator();
int domainWidth = 32 - Integer.numberOfLeadingZeros(2 + domains.size());

    // 550, 1
    jamonWriter.write("typedef enum logic [");
    // 550, 21
    org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(domainWidth - 1), jamonWriter);
    // 550, 42
    jamonWriter.write(":0]\n{\n    ");
    // 552, 5
    {
      // 552, 5
      __jamon_innerUnit____rstdom(jamonWriter, ResetDomain.CHIP.toString() );
    }
    // 552, 57
    jamonWriter.write(" = ");
    // 553, 1
    {
      // 553, 1
      __jamon_innerUnit____xdisplay(jamonWriter, 0, domainWidth );
    }
    // 553, 41
    jamonWriter.write(",\n\n");
    // 555, 1
    for (int i = 1; domainIterator.hasNext(); i++ )
    {
      // 555, 50
      jamonWriter.write("    ");
      // 556, 5
      {
        // 556, 5
        __jamon_innerUnit____rstdom(jamonWriter, domainIterator.next().toString() );
      }
      // 556, 62
      jamonWriter.write(" = ");
      // 557, 1
      {
        // 557, 1
        __jamon_innerUnit____xdisplay(jamonWriter, i, domainWidth );
      }
      // 557, 41
      jamonWriter.write(",\n\n");
    }
    // 559, 8
    jamonWriter.write("    ");
    // 560, 5
    {
      // 560, 5
      __jamon_innerUnit____rstdom(jamonWriter, "MAX" );
    }
    // 560, 35
    jamonWriter.write(" = ");
    // 561, 1
    {
      // 561, 1
      __jamon_innerUnit____xdisplay(jamonWriter, 1 + domains.size(), domainWidth );
    }
    // 561, 58
    jamonWriter.write("\n\n} fv_resetDomain;\n\n");
    // 565, 1
    for (RegisterBase b : bases )
    {
      // 566, 1
      
Iterator<Register> it;
List<Register> regs = new ArrayList<Register>(b.getRegisters());
Map<Register, Map<DimInfo, int[]>> dims;

      // 573, 1
      
it = regs.iterator();
while (it.hasNext()) {
    Register r = it.next();
    if (r.getBitWidth() == 0 || r.getNumFields() == 0) {
        System.err.println("WARNING: " + r.getName() + " register has zero width and/or no fields; skipping");
        it.remove();
    }
}

      // 585, 1
      
dims = new HashMap<Register, Map<DimInfo, int[]>>();
for (Register r : regs) {
    int nDims = r.getNumDimensions() == 1 && r.getNumEntries() == 1 ?
                0 :
                r.getNumDimensions();
    int[] n = new int[nDims];
    int[] o = new int[nDims];
    int[] s = new int[nDims];
    switch (nDims) {
        case 0:
            break;
        case 1:
            n[0] = r.getNumEntries();
            o[0] = r.getBaseEntry();
            s[0] = r.getEntrySpace();
            break;
        case 2:
            n[0] = r.getNumEntries1();
            n[1] = r.getNumEntries();
            o[0] = r.getBaseEntry1();
            o[1] = r.getBaseEntry();
            s[0] = r.getEntrySpace1();
            s[1] = r.getEntrySpace();
            break;
        case 3:
            n[0] = r.getNumEntries2();
            n[1] = r.getNumEntries1();
            n[2] = r.getNumEntries();
            o[0] = r.getBaseEntry2();
            o[1] = r.getBaseEntry1();
            o[2] = r.getBaseEntry();
            s[0] = r.getEntrySpace2();
            s[1] = r.getEntrySpace1();
            s[2] = r.getEntrySpace();
            break;
        default:
            throw new Error(nDims + "-dimensional registers not supported");
    }
    dims.put(r, new EnumMap<DimInfo, int[]>(DimInfo.class));
    dims.get(r).put(DimInfo.OFFSET, o);
    dims.get(r).put(DimInfo.SIZE, n);
    dims.get(r).put(DimInfo.STRIDE, s);
}

      // 630, 1
      jamonWriter.write("//-----------------------------------------------------------------------------\n// ");
      // 631, 4
      org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(b.getFullName()), jamonWriter);
      // 631, 25
      jamonWriter.write("\n//-----------------------------------------------------------------------------\n\n");
      // 634, 1
      for (Register r : regs )
      {
        // 635, 1
        
fields = r.getSortedFields();
// Re-reverse the field order.
Collections.sort(fields, new RegisterFieldComparator());
def = new LittleEndianBitArray(r.getBitWidth() + 1);
def.set(r.getDefault(0));

        // 642, 1
        jamonWriter.write("class ");
        // 642, 7
        {
          // 642, 7
          __jamon_innerUnit____uvm_reg_type(jamonWriter, r );
        }
        // 642, 34
        jamonWriter.write(" extends uvm_reg;\n\n    `uvm_object_utils(");
        // 644, 23
        {
          // 644, 23
          __jamon_innerUnit____uvm_reg_type(jamonWriter, r );
        }
        // 644, 50
        jamonWriter.write(")\n\n");
        // 646, 1
        for (RegisterField f : fields )
        {
          // 646, 34
          jamonWriter.write("    rand uvm_reg_field ");
          // 647, 24
          org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(f.desc), jamonWriter);
          // 647, 36
          jamonWriter.write(";\n");
        }
        // 648, 8
        jamonWriter.write("\n");
        // 650, 1
        if (coverage )
        {
          // 650, 17
          jamonWriter.write("    covergroup cg_field_vals();\n        option.per_instance = 1;\n");
          // 653, 1
          for (RegisterField f : fields )
          {
            // 655, 1
            if (!FV_RESERVED.matcher(f.desc).matches() )
            {
              // 655, 47
              jamonWriter.write("        ");
              // 656, 9
              org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(f.desc), jamonWriter);
              // 656, 21
              jamonWriter.write(" : coverpoint ");
              // 656, 35
              org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(f.desc), jamonWriter);
              // 656, 47
              jamonWriter.write(".value {\n");
              // 657, 1
              if (f.len > 1 )
              {
                // 657, 18
                jamonWriter.write("            bins min = { ");
                // 658, 26
                {
                  // 658, 26
                  __jamon_innerUnit____xdisplay(jamonWriter, new LittleEndianBitArray(f.len), f.len );
                }
                // 658, 90
                jamonWriter.write(" };\n            bins max = { ");
                // 659, 26
                {
                  // 659, 26
                  __jamon_innerUnit____xdisplay(jamonWriter, new LittleEndianBitArray(f.len).invert(), f.len );
                }
                // 659, 99
                jamonWriter.write(" };\n            bins others = { [");
                // 660, 30
                {
                  // 660, 30
                  __jamon_innerUnit____xdisplay(jamonWriter, new LittleEndianBitArray(f.len).invert(0, 1), f.len );
                }
                // 660, 107
                jamonWriter.write(":");
                // 661, 1
                {
                  // 661, 1
                  __jamon_innerUnit____xdisplay(jamonWriter, new LittleEndianBitArray(f.len).invert(1, f.len - 1), f.len );
                }
                // 661, 86
                jamonWriter.write("] };\n");
              }
              // 662, 7
              jamonWriter.write("            option.weight = ");
              // 663, 29
              if (f.len > 1 )
              {
                // 663, 46
                jamonWriter.write("3");
              }
              // 663, 47
              else
              {
                // 663, 54
                jamonWriter.write("2");
              }
              // 663, 61
              jamonWriter.write(";\n        }\n");
            }
          }
          // 666, 8
          jamonWriter.write("    endgroup : cg_field_vals;\n\n");
        }
        // 669, 7
        jamonWriter.write("    function new(string name = \"");
        // 670, 33
        org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(r.getName()), jamonWriter);
        // 670, 50
        jamonWriter.write("\");\n    begin\n");
        // 672, 1
        if (coverage )
        {
          // 672, 17
          jamonWriter.write("        super.new(name, ");
          // 673, 25
          org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(r.getBitWidth()), jamonWriter);
          // 673, 46
          jamonWriter.write(", build_coverage(UVM_CVR_FIELD_VALS));\n        if (has_coverage(UVM_CVR_FIELD_VALS))\n        begin\n            cg_field_vals = new();\n        end\n");
        }
        // 678, 1
        else
        {
          // 678, 8
          jamonWriter.write("        super.new(name, ");
          // 679, 25
          org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(r.getBitWidth()), jamonWriter);
          // 679, 46
          jamonWriter.write(", build_coverage(UVM_NO_COVERAGE));\n");
        }
        // 680, 7
        jamonWriter.write("    end\n    endfunction : new\n\n    virtual function build();\n    begin\n");
        // 686, 1
        for (RegisterField f : fields )
        {
          // 686, 34
          jamonWriter.write("        ");
          // 687, 9
          org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(f.desc), jamonWriter);
          // 687, 21
          jamonWriter.write(" = uvm_reg_field::type_id::create(\"");
          // 687, 56
          org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(f.desc), jamonWriter);
          // 687, 68
          jamonWriter.write("\");\n        ");
          // 688, 9
          org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(f.desc), jamonWriter);
          // 688, 21
          jamonWriter.write(".configure(this, ");
          // 688, 38
          org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(f.len), jamonWriter);
          // 688, 49
          jamonWriter.write(", ");
          // 688, 51
          org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(f.pos), jamonWriter);
          // 688, 62
          jamonWriter.write(", \"");
          // 689, 2
          {
            // 689, 2
            __jamon_innerUnit____uvm_reg_field_access(jamonWriter, f.type );
          }
          // 689, 42
          jamonWriter.write("\", ");
          // 690, 1
          {
            // 690, 1
            __jamon_innerUnit____uvm_reg_field_volatility(jamonWriter, f.type );
          }
          // 690, 45
          jamonWriter.write(", ");
          // 691, 1
          org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(f.len), jamonWriter);
          // 691, 12
          jamonWriter.write("'h");
          // 691, 14
          org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(def.getSlice(f.pos, f.len).toHexString()), jamonWriter);
          // 691, 60
          jamonWriter.write(", 1, 1, 0);\n");
        }
        // 692, 8
        jamonWriter.write("    end\n    endfunction : build\n\n");
        // 696, 1
        if (coverage )
        {
          // 696, 17
          jamonWriter.write("    virtual function void sample_values();\n    begin\n        if (get_coverage(UVM_CVR_FIELD_VALS) & (cg_field_vals != null))\n        begin\n            cg_field_vals.sample();\n        end\n    end\n    endfunction : sample_values\n\n");
        }
        // 706, 7
        jamonWriter.write("endclass : ");
        // 707, 12
        {
          // 707, 12
          __jamon_innerUnit____uvm_reg_type(jamonWriter, r );
        }
        // 707, 39
        jamonWriter.write("\n\n");
      }
      // 709, 8
      jamonWriter.write("class ");
      // 710, 7
      {
        // 710, 7
        __jamon_innerUnit____uvm_reg_block_type(jamonWriter, b );
      }
      // 710, 40
      jamonWriter.write(" extends uvm_reg_block;\n\n    `uvm_object_utils(");
      // 712, 23
      {
        // 712, 23
        __jamon_innerUnit____uvm_reg_block_type(jamonWriter, b );
      }
      // 712, 56
      jamonWriter.write(")\n\n");
      // 714, 1
      for (Register r : regs )
      {
        // 714, 27
        jamonWriter.write("    rand ");
        // 715, 10
        {
          // 715, 10
          __jamon_innerUnit____uvm_reg_type(jamonWriter, r );
        }
        // 715, 37
        jamonWriter.write(" ");
        // 715, 38
        org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(r.getName()), jamonWriter);
        // 716, 1
        {
          // 716, 1
          __jamon_innerUnit____uvm_reg_dimensions(jamonWriter, dims.get(r).get(DimInfo.SIZE) );
        }
        // 716, 62
        jamonWriter.write(";\n");
      }
      // 718, 1
      if (coverage )
      {
        // 718, 17
        jamonWriter.write("    local uvm_reg_addr_t m_offset;\n\n    covergroup cg_addr_map();\n        option.per_instance = 1;\n");
        // 723, 1
        for (Register r : regs )
        {
          // 723, 27
          jamonWriter.write("        ");
          // 724, 9
          org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(r.getName().toLowerCase()), jamonWriter);
          // 724, 40
          jamonWriter.write(" : coverpoint m_offset {\n            bins accessed = {\n");
          // 726, 1
          {
            // 726, 1
            __jamon_innerUnit____cg_addr_map_bins(jamonWriter, r, dims.get(r), indent, 4 );
          }
          // 726, 68
          jamonWriter.write("            };\n            option.weight = 1;\n        }\n");
        }
        // 730, 8
        jamonWriter.write("    endgroup : cg_addr_map\n");
      }
      // 732, 7
      jamonWriter.write("\n    function new(string name = \"");
      // 734, 33
      org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(b.getFullName()), jamonWriter);
      // 734, 54
      jamonWriter.write("\");\n    begin\n");
      // 736, 1
      if (coverage )
      {
        // 736, 17
        jamonWriter.write("        super.new(name, build_coverage(UVM_CVR_ADDR_MAP));\n        if (has_coverage(UVM_CVR_ADDR_MAP))\n        begin\n            cg_addr_map = new();\n        end\n");
      }
      // 742, 1
      else
      {
        // 742, 8
        jamonWriter.write("        super.new(name, build_coverage(UVM_NO_COVERAGE));\n");
      }
      // 744, 7
      jamonWriter.write("    end\n    endfunction : new\n\n    virtual function build();\n    begin\n        default_map = create_map(\"");
      // 750, 35
      org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(b.getFullName()), jamonWriter);
      // 750, 56
      jamonWriter.write("\", ");
      // 751, 1
      {
        // 751, 1
        __jamon_innerUnit____xdisplay(jamonWriter, b.getAbsoluteAddress(), 32 );
      }
      // 751, 53
      jamonWriter.write(", 4, UVM_LITTLE_ENDIAN, 0);\n");
      // 752, 1
      for (Register r : regs )
      {
        // 753, 1
        {
          // 753, 1
          __jamon_innerUnit____uvm_reg_loop_begin(jamonWriter, dims.get(r).get(DimInfo.SIZE), indent, 2 );
        }
        // 754, 1
        org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(indent), jamonWriter);
        // 754, 13
        {
          // 754, 13
          __jamon_innerUnit____uvm_reg_var(jamonWriter, r, dims.get(r).get(DimInfo.SIZE) );
        }
        // 754, 74
        jamonWriter.write(" = ");
        // 755, 1
        {
          // 755, 1
          __jamon_innerUnit____uvm_reg_type(jamonWriter, r );
        }
        // 755, 28
        jamonWriter.write("::type_id::create(");
        // 755, 46
        {
          // 755, 46
          __jamon_innerUnit____uvm_reg_name(jamonWriter, r, dims.get(r).get(DimInfo.SIZE) );
        }
        // 755, 108
        jamonWriter.write(");\n");
        // 756, 1
        org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(indent), jamonWriter);
        // 756, 13
        {
          // 756, 13
          __jamon_innerUnit____uvm_reg_var(jamonWriter, r, dims.get(r).get(DimInfo.SIZE) );
        }
        // 756, 74
        jamonWriter.write(".build();\n");
        // 757, 1
        org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(indent), jamonWriter);
        // 757, 13
        {
          // 757, 13
          __jamon_innerUnit____uvm_reg_var(jamonWriter, r, dims.get(r).get(DimInfo.SIZE) );
        }
        // 757, 74
        jamonWriter.write(".configure(this, null);\n");
        // 758, 1
        org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(indent), jamonWriter);
        // 758, 13
        jamonWriter.write("default_map.add_reg(");
        // 758, 33
        {
          // 758, 33
          __jamon_innerUnit____uvm_reg_var(jamonWriter, r, dims.get(r).get(DimInfo.SIZE) );
        }
        // 758, 94
        jamonWriter.write(", ");
        // 759, 1
        {
          // 759, 1
          __jamon_innerUnit____uvm_reg_offset(jamonWriter, r.getAddressOffset(), dims.get(r).get(DimInfo.OFFSET), dims.get(r).get(DimInfo.STRIDE) );
        }
        // 759, 123
        jamonWriter.write(", \"RW\");\n");
        // 761, 1
        {
          // 761, 1
          __jamon_innerUnit____uvm_reg_loop_end(jamonWriter, dims.get(r).get(DimInfo.SIZE), indent );
        }
      }
      // 762, 8
      jamonWriter.write("    end\n    endfunction : build\n\n");
      // 766, 1
      if (coverage )
      {
        // 766, 17
        jamonWriter.write("    virtual function void sample(uvm_reg_addr_t offset,\n                                 bit            is_read,\n                                 uvm_reg_map    map);\n    begin\n        if (get_coverage(UVM_CVR_ADDR_MAP) & (cg_addr_map != null))\n        begin\n            m_offset = offset;\n            cg_addr_map.sample();\n        end\n    end\n    endfunction : sample\n\n");
      }
      // 779, 7
      jamonWriter.write("endclass : ");
      // 780, 12
      {
        // 780, 12
        __jamon_innerUnit____uvm_reg_block_type(jamonWriter, b );
      }
      // 780, 45
      jamonWriter.write("\n\n");
    }
    // 782, 8
    jamonWriter.write("class fv_regInfo extends uvm_reg_block;\n\n    `uvm_object_utils(fv_regInfo)\n\n");
    // 787, 1
    for (RegisterBase b : bases )
    {
      // 787, 32
      jamonWriter.write("    ");
      // 788, 5
      {
        // 788, 5
        __jamon_innerUnit____uvm_reg_block_type(jamonWriter, b );
      }
      // 788, 38
      jamonWriter.write(" ");
      // 788, 39
      org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(b.getFullName()), jamonWriter);
      // 788, 60
      jamonWriter.write(";\n");
    }
    // 789, 8
    jamonWriter.write("\n    function new(string name = \"regInfo\");\n    begin\n        super.new(name, UVM_NO_COVERAGE);\n    end\n    endfunction : new\n\n    virtual function build();\n    begin\n        default_map = create_map(get_name(), ");
    // 799, 46
    {
      // 799, 46
      __jamon_innerUnit____xdisplay(jamonWriter, 0, 32 );
    }
    // 799, 77
    jamonWriter.write(", 4, UVM_LITTLE_ENDIAN);\n");
    // 801, 1
    for (RegisterBase b : bases )
    {
      // 801, 32
      jamonWriter.write("        ");
      // 802, 9
      org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(b.getFullName()), jamonWriter);
      // 802, 30
      jamonWriter.write(" = ");
      // 802, 33
      {
        // 802, 33
        __jamon_innerUnit____uvm_reg_block_type(jamonWriter, b );
      }
      // 802, 66
      jamonWriter.write("::type_id::create(\"");
      // 802, 85
      org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(b.getFullName()), jamonWriter);
      // 802, 106
      jamonWriter.write("\");\n        ");
      // 803, 9
      org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(b.getFullName()), jamonWriter);
      // 803, 30
      jamonWriter.write(".build();\n        ");
      // 804, 9
      org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(b.getFullName()), jamonWriter);
      // 804, 30
      jamonWriter.write(".configure(this);\n        default_map.add_submap(");
      // 805, 32
      org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(b.getFullName()), jamonWriter);
      // 805, 53
      jamonWriter.write(".default_map, ");
      // 806, 1
      org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(b.getFullName()), jamonWriter);
      // 806, 22
      jamonWriter.write(".default_map.get_base_addr());\n");
    }
    // 807, 8
    jamonWriter.write("    end\n    endfunction : build\n\nendclass : fv_regInfo\n\nendpackage : ");
    // 813, 14
    {
      // 813, 14
      __jamon_innerUnit____package(jamonWriter, output );
    }
    // 813, 44
    jamonWriter.write("\n");
  }
  
  
  // 434, 1
  private void __jamon_innerUnit____uvm_reg_type(final java.io.Writer jamonWriter, final Register r)
    throws java.io.IOException
  {
    // 438, 1
    jamonWriter.write("fv_");
    // 438, 4
    org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(Utility.underscoreToCamelCase(r.getName(), false)), jamonWriter);
  }
  
  
  // 478, 1
  private void __jamon_innerUnit____xdisplay(final java.io.Writer jamonWriter, final Object i, final int w)
    throws java.io.IOException
  {
    // 483, 1
    
String value;
int nibbles = (int) Math.ceil(w / 4.0);
if (i instanceof Integer) {
    value = String.format(String.format("%%0%dx", nibbles), (Integer) i);
} else if (i instanceof LittleEndianBitArray) {
    value = ((LittleEndianBitArray) i).toHexString("_", nibbles);
} else {
    throw new Error(i.getClass().getName() + ": invalid \"i\" data type");
}

    // 494, 1
    org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(w), jamonWriter);
    // 494, 8
    jamonWriter.write("'h");
    // 494, 10
    org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(value), jamonWriter);
  }
  
  
  // 157, 1
  private void __jamon_innerUnit____rstdom(final java.io.Writer jamonWriter, final String domain)
    throws java.io.IOException
  {
    // 161, 1
    jamonWriter.write("FV_RESET_DOMAIN_");
    // 161, 17
    org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(domain), jamonWriter);
  }
  
  
  // 56, 1
  private void __jamon_innerUnit____cg_addr_map_bins(final java.io.Writer jamonWriter, final Register r, final Map<DimInfo,int[]> d, final StringBuilder i, final int w)
    throws java.io.IOException
  {
    // 63, 1
    
int[] o = d.get(DimInfo.OFFSET);
int[] n = d.get(DimInfo.SIZE);
int[] s = d.get(DimInfo.STRIDE);

    // 68, 1
    {
      // 68, 1
      __jamon_innerUnit____setindent(jamonWriter, i, w );
    }
    // 72, 1
    if (n.length == 0 )
    {
      // 73, 1
      org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(i), jamonWriter);
      // 73, 8
      {
        // 73, 8
        __jamon_innerUnit____xdisplay(jamonWriter, r.getAddressOffset(), 32 );
      }
      // 73, 58
      jamonWriter.write("\n");
    }
    // 77, 1
    else if (n.length == 1 )
    {
      // 78, 1
      for (int j = 0, size = 1; j < n[0]; j++, size++ )
      {
        // 79, 1
        if ((size % 4) == 1 )
        {
          // 79, 24
          org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(i), jamonWriter);
        }
        // 80, 1
        {
          // 80, 1
          __jamon_innerUnit____xdisplay(jamonWriter, r.getAddressOffset() + s[0] * (j - o[0]), 32 );
        }
        // 81, 1
        if (size < n[0] )
        {
          // 81, 20
          jamonWriter.write(",");
        }
        // 82, 1
        if ((size % 4) == 0 || size == n[0] )
        {
          // 82, 40
          jamonWriter.write("\n");
        }
        // 83, 1
        else
        {
          // 83, 8
          jamonWriter.write(" ");
        }
      }
    }
    // 87, 1
    else if (n.length == 2 )
    {
      // 88, 1
      for (int j = 0, size = 1; j < n[0]; j++ )
      {
        // 89, 1
        for (int k = 0; k < n[1]; k++, size++ )
        {
          // 90, 1
          if ((size % 4) == 1 )
          {
            // 90, 24
            org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(i), jamonWriter);
          }
          // 91, 1
          {
            // 91, 1
            __jamon_innerUnit____xdisplay(jamonWriter, r.getAddressOffset() + s[0] * (j - o[0]) + s[1] * (k - o[1]), 32 );
          }
          // 92, 1
          if (size < (n[0] * n[1]) )
          {
            // 92, 29
            jamonWriter.write(",");
          }
          // 93, 1
          if ((size % 4) == 0 || size == (n[0] * n[1]) )
          {
            // 93, 49
            jamonWriter.write("\n");
          }
          // 94, 1
          else
          {
            // 94, 8
            jamonWriter.write(" ");
          }
        }
      }
    }
    // 98, 1
    else if (n.length == 3 )
    {
      // 99, 1
      for (int j = 0, size = 1; j < n[0]; j++ )
      {
        // 100, 1
        for (int k = 0; k < n[1]; k++ )
        {
          // 101, 1
          for (int l = 0; l < n[2]; l++, size++ )
          {
            // 102, 1
            if ((size % 4) == 1 )
            {
              // 102, 24
              org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(i), jamonWriter);
            }
            // 103, 1
            {
              // 103, 1
              __jamon_innerUnit____xdisplay(jamonWriter, r.getAddressOffset() + s[0] * (j - o[0]) + s[1] * (k - o[1]) + s[2] * (l - o[2]), 32 );
            }
            // 104, 1
            if (size < (n[0] * n[1] * n[2]) )
            {
              // 104, 36
              jamonWriter.write(",");
            }
            // 104, 43
            jamonWriter.write("\n");
            // 105, 1
            if ((size % 4) == 0 || size == (n[0] * n[1] * n[2]) )
            {
              // 105, 56
              jamonWriter.write("\n");
            }
            // 106, 1
            else
            {
              // 106, 8
              jamonWriter.write(" ");
            }
          }
        }
      }
    }
    // 107, 1
    else
    {
      // 108, 1
      
throw new Error(n.length + "-dimensional registers not supported");

    }
  }
  
  
  // 179, 1
  private void __jamon_innerUnit____setindent(final java.io.Writer jamonWriter, final StringBuilder i, final int w)
    throws java.io.IOException
  {
    // 184, 1
    
i.delete(0, i.length());
for (int j = 0; j < w; j++) {
    for (int k = 0; k < FV_SV_INDENT; k++) {
        i.append(" ");
    }
}

  }
  
  
  // 408, 1
  private void __jamon_innerUnit____uvm_reg_offset(final java.io.Writer jamonWriter, final int b, final int[] o, final int[] s)
    throws java.io.IOException
  {
    // 414, 1
    {
      // 414, 1
      __jamon_innerUnit____xdisplay(jamonWriter, b, 32 );
    }
    // 415, 1
    for (int j = 0; j < Math.min(o.length, s.length); j++ )
    {
      // 415, 58
      jamonWriter.write(" + ");
      // 416, 4
      {
        // 416, 4
        __jamon_innerUnit____xdisplay(jamonWriter, s[j], 32 );
      }
      // 416, 38
      jamonWriter.write(" * (");
      // 416, 42
      org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(FV_SV_INDEX[j]), jamonWriter);
      // 416, 62
      jamonWriter.write(" - ");
      // 416, 65
      {
        // 416, 65
        __jamon_innerUnit____xdisplay(jamonWriter, o[j], 32 );
      }
      // 416, 99
      jamonWriter.write(")");
    }
  }
  
  
  // 129, 1
  private void __jamon_innerUnit____package(final java.io.Writer jamonWriter, final String file)
    throws java.io.IOException
  {
    // 133, 1
    
String basename = new File(output).getName().split("\\.(?=[^\\.]+$)")[0];
basename = basename.replaceAll("-", "_");

    // 139, 1
    
basename = basename.startsWith("fv_") ? basename : "fv_".concat(basename);

    // 142, 1
    org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(Utility.underscoreToCamelCase(basename, false)), jamonWriter);
  }
  
  
  // 355, 1
  private void __jamon_innerUnit____uvm_reg_loop_end(final java.io.Writer jamonWriter, final int[] n, final StringBuilder i)
    throws java.io.IOException
  {
    // 360, 1
    for (int j = 0; j < n.length; j++ )
    {
      // 361, 1
      for (int k = 0; k < FV_SV_INDENT; k++) i.deleteCharAt(0);
      // 362, 1
      org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(i), jamonWriter);
      // 362, 8
      jamonWriter.write("end\n");
    }
  }
  
  
  // 380, 1
  private void __jamon_innerUnit____uvm_reg_name(final java.io.Writer jamonWriter, final Register r, final int[] n)
    throws java.io.IOException
  {
    // 385, 1
    if (n.length > 0 )
    {
      // 385, 21
      jamonWriter.write("$sformatf(\"");
      // 386, 12
      org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(r.getName()), jamonWriter);
      // 386, 29
      for (int j = 0; j < n.length; j++ )
      {
        // 386, 66
        jamonWriter.write("[%d]");
      }
      // 386, 77
      jamonWriter.write("\"");
      // 387, 1
      for (int j = 0; j < n.length; j++ )
      {
        // 387, 38
        jamonWriter.write(", ");
        // 387, 40
        org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(FV_SV_INDEX[j]), jamonWriter);
      }
      // 387, 67
      jamonWriter.write(")");
    }
    // 388, 1
    else
    {
      // 388, 8
      jamonWriter.write("\"");
      // 388, 9
      org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(r.getName()), jamonWriter);
      // 388, 26
      jamonWriter.write("\"");
    }
  }
  
  
  // 324, 1
  private void __jamon_innerUnit____uvm_reg_loop_begin(final java.io.Writer jamonWriter, final int[] n, final StringBuilder i, final int w)
    throws java.io.IOException
  {
    // 330, 1
    {
      // 330, 1
      __jamon_innerUnit____setindent(jamonWriter, i, w );
    }
    // 330, 32
    for (int j = 0; j < n.length; j++ )
    {
      // 331, 1
      org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(indent), jamonWriter);
      // 331, 13
      jamonWriter.write("for (int ");
      // 331, 22
      org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(FV_SV_INDEX[j]), jamonWriter);
      // 331, 42
      jamonWriter.write(" = 0; ");
      // 331, 48
      org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(FV_SV_INDEX[j]), jamonWriter);
      // 331, 68
      jamonWriter.write(" < ");
      // 331, 71
      org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(n[j]), jamonWriter);
      // 331, 81
      jamonWriter.write("; ");
      // 331, 83
      org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(FV_SV_INDEX[j]), jamonWriter);
      // 331, 103
      jamonWriter.write("++)\n");
      // 332, 1
      org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(indent), jamonWriter);
      // 332, 13
      jamonWriter.write("begin\n");
      // 333, 1
      for (int k = 0; k < FV_SV_INDENT; k++) indent.append(" ");
    }
  }
  
  
  // 208, 1
  private void __jamon_innerUnit____uvm_reg_block_type(final java.io.Writer jamonWriter, final RegisterBase b)
    throws java.io.IOException
  {
    // 212, 1
    jamonWriter.write("fv_");
    // 212, 4
    org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(Utility.underscoreToCamelCase(b.getFullName(), false)), jamonWriter);
  }
  
  
  // 455, 1
  private void __jamon_innerUnit____uvm_reg_var(final java.io.Writer jamonWriter, final Register r, final int[] n)
    throws java.io.IOException
  {
    // 460, 1
    org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(r.getName()), jamonWriter);
    // 461, 1
    for (int j = 0; j < n.length; j++ )
    {
      // 461, 38
      jamonWriter.write("[");
      // 461, 39
      org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(FV_SV_INDEX[j]), jamonWriter);
      // 461, 59
      jamonWriter.write("]");
    }
  }
  
  
  // 229, 1
  private void __jamon_innerUnit____uvm_reg_dimensions(final java.io.Writer jamonWriter, final int[] n)
    throws java.io.IOException
  {
    // 233, 1
    for (int j = 0; j < n.length; j++ )
    {
      // 233, 38
      jamonWriter.write("[");
      // 233, 39
      org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(n[j]), jamonWriter);
      // 233, 49
      jamonWriter.write("]");
    }
  }
  
  
  // 251, 1
  private void __jamon_innerUnit____uvm_reg_field_access(final java.io.Writer jamonWriter, final RegisterType t)
    throws java.io.IOException
  {
    // 255, 1
    
String mode;
switch (t) {
    case RW:  mode = "RW";  break;
    case RO:  mode = "RO";  break;
    case SRW: mode = "RW";  break;
    case WO:  mode = "WO";  break;
    case CW:  mode = "WC";  break;
    case CW1: mode = "W1C"; break;
    case SW1: mode = "W1C"; break;
    case CR:  mode = "RC";  break;
    case CA:  throw new Error("\"clear on access\" not supported");
    case RV:  mode = "WO1"; break;
    default:  throw new Error("\"" + t.toString() + "\" access policy not supported");
}

    // 271, 1
    org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(mode), jamonWriter);
  }
  
  
  // 287, 1
  private void __jamon_innerUnit____uvm_reg_field_volatility(final java.io.Writer jamonWriter, final RegisterType t)
    throws java.io.IOException
  {
    // 291, 1
    
boolean isVolatile;
switch (t) {
    case RO: isVolatile = true;  break;
    default: isVolatile = false; break;
}

    // 298, 1
    if (isVolatile )
    {
      // 298, 19
      jamonWriter.write("1");
    }
    // 298, 20
    else
    {
      // 298, 27
      jamonWriter.write("0");
    }
  }
  
  
}
