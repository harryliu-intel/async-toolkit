// Autogenerated Jamon implementation
// /nfs/sc/proj/ctg/mrl108/rliu68/sw-intel5/cad/java/src/./com/fulcrummicro/hw/verification/chip/mgmt/registers/templates/SdkDebugRegs.jamon

package com.fulcrummicro.hw.verification.chip.mgmt.registers.templates;

// 3, 1
import java.util.Collection;
// 4, 1
import java.util.regex.Pattern;
// 5, 1
import com.fulcrummicro.util.misc.Utility;
// 6, 1
import com.fulcrummicro.hw.verification.chip.mgmt.registers.Register;

public class SdkDebugRegsImpl
  extends com.fulcrummicro.util.jamon.timestampImpl
  implements com.fulcrummicro.hw.verification.chip.mgmt.registers.templates.SdkDebugRegs.Intf

{
  private final Collection<Register> regs;
  private final String prefix;
  private final int numPorts;
  private final int numEpls;
  private final int numLanes;
  // 202, 1
  
static int ndims(Register r) {
    return r.getNumDimensions() == 1 && r.getNumEntries() == 1 ?
           0 :
           r.getNumDimensions();
}

  protected static com.fulcrummicro.hw.verification.chip.mgmt.registers.templates.SdkDebugRegs.ImplData __jamon_setOptionalArguments(com.fulcrummicro.hw.verification.chip.mgmt.registers.templates.SdkDebugRegs.ImplData p_implData)
  {
    com.fulcrummicro.util.jamon.timestampImpl.__jamon_setOptionalArguments(p_implData);
    return p_implData;
  }
  public SdkDebugRegsImpl(org.jamon.TemplateManager p_templateManager, com.fulcrummicro.hw.verification.chip.mgmt.registers.templates.SdkDebugRegs.ImplData p_implData)
  {
    super(p_templateManager, __jamon_setOptionalArguments(p_implData));
    regs = p_implData.getRegs();
    prefix = p_implData.getPrefix();
    numPorts = p_implData.getNumPorts();
    numEpls = p_implData.getNumEpls();
    numLanes = p_implData.getNumLanes();
  }
  
  @Override protected void child_render_1(final java.io.Writer jamonWriter)
    throws java.io.IOException
  {
    // 209, 1
    
String lcPrefix = Utility.underscoreToCamelCase(prefix, false).toLowerCase();
String ucPrefix = Utility.underscoreToCamelCase(prefix, false).toUpperCase();

    // 213, 1
    jamonWriter.write("/* vim:ts=4:sw=4:expandtab\n * (No tabs, indent level is 4 spaces)  */\n/*****************************************************************************\n * File:            fm10000_debug_reg_table.c\n * Creation Date:   April 27, 2013\n * Last Updated:    ");
    // 218, 21
    {
      // 218, 21
      __jamon_innerUnit__timestamp(jamonWriter);
    }
    // 218, 37
    jamonWriter.write("\n * Description:     FM10000 debug register table.\n *                  THIS FILE IS AUTOMATICALLY GENERATED - DO NOT MODIFY.\n *\n * INTEL CONFIDENTIAL\n * Copyright ");
    // 223, 14
    {
      // 223, 14
      __jamon_innerUnit__copyright_year(jamonWriter, 2013 );
    }
    // 223, 55
    jamonWriter.write(" Intel Corporation. All Rights Reserved.\n *\n * The source code contained or described herein and all documents related\n * to the source code (\"Material\") are owned by Intel Corporation or its\n * suppliers or licensors. Title to the Material remains with Intel\n * Corporation or its suppliers and licensors. The Material contains trade\n * secrets and proprietary and confidential information of Intel or its\n * suppliers and licensors. The Material is protected by worldwide copyright\n * and trade secret laws and treaty provisions. No part of the Material may\n * be used, copied, reproduced, modified, published, uploaded, posted,\n * transmitted, distributed, or disclosed in any way without Intel's prior\n * express written permission.\n *\n * No license under any patent, copyright, trade secret or other intellectual\n * property right is granted to or conferred upon you by disclosure or\n * delivery of the Materials, either expressly, by implication, inducement,\n * estoppel or otherwise. Any license under such intellectual property rights\n * must be express and approved by Intel in writing.\n *****************************************************************************/\n\n#include \"fm_sdk_");
    // 244, 18
    org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(lcPrefix), jamonWriter);
    // 244, 32
    jamonWriter.write("_int.h\"\n\n#include \"debug/");
    // 246, 17
    org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(lcPrefix), jamonWriter);
    // 246, 31
    jamonWriter.write("/");
    // 246, 32
    org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(lcPrefix), jamonWriter);
    // 246, 46
    jamonWriter.write("_debug_regs_int.h\"\n\n\n/**********************************************************************\n * ");
    // 250, 4
    org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(ucPrefix), jamonWriter);
    // 250, 18
    jamonWriter.write(" Register Table\n **********************************************************************/\n\nconst ");
    // 253, 7
    org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(lcPrefix), jamonWriter);
    // 253, 21
    jamonWriter.write("DbgFulcrumRegister ");
    // 253, 40
    org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(lcPrefix), jamonWriter);
    // 253, 54
    jamonWriter.write("RegisterTable[] =\n{\n    /* RegName                                      method    address   flags group words min0   min1   min2   max0   max1   max2   step0     step1     step2 */\n");
    // 256, 1
    for (Register r : regs )
    {
      // 256, 27
      jamonWriter.write("    { ");
      // 257, 7
      {
        // 257, 7
        __jamon_innerUnit____regname(jamonWriter, r );
      }
      // 258, 1
      {
        // 258, 1
        __jamon_innerUnit____method(jamonWriter, r );
      }
      // 259, 1
      {
        // 259, 1
        __jamon_innerUnit____strfaddr(jamonWriter, r.getAddress() );
      }
      // 259, 40
      jamonWriter.write(", ");
      // 260, 1
      {
        // 260, 1
        __jamon_innerUnit____flags(jamonWriter, r );
      }
      // 261, 1
      {
        // 261, 1
        __jamon_innerUnit____group(jamonWriter, r );
      }
      // 262, 1
      {
        // 262, 1
        __jamon_innerUnit____width(jamonWriter, r );
      }
      // 263, 1
      {
        // 263, 1
        __jamon_innerUnit____diminfo(jamonWriter, r, 0, true , false, false);
      }
      // 264, 1
      {
        // 264, 1
        __jamon_innerUnit____diminfo(jamonWriter, r, 1, true , false, false);
      }
      // 265, 1
      {
        // 265, 1
        __jamon_innerUnit____diminfo(jamonWriter, r, 2, true , false, false);
      }
      // 266, 1
      {
        // 266, 1
        __jamon_innerUnit____diminfo(jamonWriter, r, 0, false, true , false);
      }
      // 267, 1
      {
        // 267, 1
        __jamon_innerUnit____diminfo(jamonWriter, r, 1, false, true , false);
      }
      // 268, 1
      {
        // 268, 1
        __jamon_innerUnit____diminfo(jamonWriter, r, 2, false, true , false);
      }
      // 269, 1
      {
        // 269, 1
        __jamon_innerUnit____diminfo(jamonWriter, r, 0, false, false, true );
      }
      // 269, 45
      jamonWriter.write(", ");
      // 270, 1
      {
        // 270, 1
        __jamon_innerUnit____diminfo(jamonWriter, r, 1, false, false, true );
      }
      // 270, 45
      jamonWriter.write(", ");
      // 271, 1
      {
        // 271, 1
        __jamon_innerUnit____diminfo(jamonWriter, r, 2, false, false, true );
      }
      // 271, 45
      jamonWriter.write(" },\n");
    }
    // 272, 8
    jamonWriter.write("\n    /* This entry marks the end of the hardware registers. */\n    { \"END_OF_REGISTERS\",                           SCALAR,   0x000000, 0x80,  0x0,  0,   0,     0,     0,     0,     0,     0,     0x1,      0x1,      0x1      },\n\n    /* Composite registers: trigger the dumping of multiple registers */\n    { \"FM_ALL_REGS_FOR_PORT\",                       ALL4PORT, 0x000000, 0x01,  0x0,  0,   0,     0,     0,     47,    0,     0,     0x1,      0x1,      0x1      },\n    { \"FM_RX_TYPE\",                                 GROUPREG, 0x000000, 0x01,  0x1,  0,   0,     0,     0,     47,    0,     0,     0x1,      0x1,      0x1      },\n    { \"FM_RX_BIN\",                                  GROUPREG, 0x000000, 0x01,  0x2,  0,   0,     0,     0,     47,    0,     0,     0x1,      0x1,      0x1      },\n    { \"FM_RX_OCTET\",                                GROUPREG, 0x000000, 0x01,  0x3,  0,   0,     0,     0,     47,    0,     0,     0x1,      0x1,      0x1      },\n    { \"FM_RX_PKT_PRI\",                              GROUPREG, 0x000000, 0x01,  0x4,  0,   0,     0,     0,     47,    0,     0,     0x1,      0x1,      0x1      },\n    { \"FM_RX_OCT_PRI\",                              GROUPREG, 0x000000, 0x01,  0x5,  0,   0,     0,     0,     47,    0,     0,     0x1,      0x1,      0x1      },\n    { \"FM_RX_ACTION\",                               GROUPREG, 0x000000, 0x01,  0x6,  0,   0,     0,     0,     47,    0,     0,     0x1,      0x1,      0x1      },\n    { \"FM_TX_TYPE\",                                 GROUPREG, 0x000000, 0x01,  0x7,  0,   0,     0,     0,     47,    0,     0,     0x1,      0x1,      0x1      },\n    { \"FM_TX_BIN\",                                  GROUPREG, 0x000000, 0x01,  0x8,  0,   0,     0,     0,     47,    0,     0,     0x1,      0x1,      0x1      },\n    { \"FM_TX_OCTET\",                                GROUPREG, 0x000000, 0x01,  0x9,  0,   0,     0,     0,     47,    0,     0,     0x1,      0x1,      0x1      },\n    { \"FM_TX_INGRESS\",                              GROUPREG, 0x000000, 0x01,  0x10, 0,   0,     0,     0,     47,    0,     0,     0x1,      0x1,      0x1      },\n    { \"FM_VLAN_PKT\",                                GROUPREG, 0x000000, 0x00,  0x11, 0,   0,     0,     0,     63,    0,     0,     0x1,      0x1,      0x1      },\n    { \"FM_EGRESS_ACL\",                              GROUPREG, 0x000000, 0x01,  0x14, 0,   0,     0,     0,     47,    0,     0,     0x1,      0x1,      0x1      },\n    { \"FM_ALL_CONFIG_REGS\",                         ALLCONFG, 0x000000, 0x00,  0x0 , 0,   0,     0,     0,     0 ,    0,     0,     0x1,      0x1,      0x1      },\n\n    /* this entry must be the last entry in the table */\n    { NULL,                                         SCALAR,   0x000000, 0x00,  0x00, 0,   0,     0,     0,     0,     0,     0,     0x0,      0x0,      0x0      }\n\n};  /* end ");
    // 296, 12
    org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(lcPrefix), jamonWriter);
    // 296, 26
    jamonWriter.write("RegisterTable */\n\n#define ");
    // 298, 9
    org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(prefix), jamonWriter);
    // 298, 21
    jamonWriter.write("REGISTER_TABLE_SIZE  ((fm_int) (sizeof(");
    // 298, 60
    org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(lcPrefix), jamonWriter);
    // 298, 74
    jamonWriter.write("RegisterTable) / sizeof(");
    // 298, 98
    org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(lcPrefix), jamonWriter);
    // 298, 112
    jamonWriter.write("RegisterTable[0])))\n\nconst fm_int ");
    // 300, 14
    org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(lcPrefix), jamonWriter);
    // 300, 28
    jamonWriter.write("RegisterTableSize = ");
    // 300, 48
    org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(prefix), jamonWriter);
    // 300, 60
    jamonWriter.write("REGISTER_TABLE_SIZE;\n");
  }
  
  
  // 178, 1
  private void __jamon_innerUnit____xdisplay(final java.io.Writer jamonWriter, final Integer i, final int w)
    throws java.io.IOException
  {
    // 183, 1
    
int nibbles = (int) Math.ceil(w / 4.0);

    // 186, 1
    org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(String.format(String.format("0x%%0%dX", nibbles), i)), jamonWriter);
  }
  
  
  // 149, 1
  private void __jamon_innerUnit____strfaddr(final java.io.Writer jamonWriter, final int addr)
    throws java.io.IOException
  {
    // 153, 1
    {
      // 153, 1
      __jamon_innerUnit____xdisplay(jamonWriter, addr, 24 );
    }
  }
  
  
  // 127, 1
  private void __jamon_innerUnit____regname(final java.io.Writer jamonWriter, final Register r)
    throws java.io.IOException
  {
    // 131, 1
    
String s = String.format("\"%s%s\",", prefix, r.getName());

    // 134, 1
    org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(String.format("%-46s", s)), jamonWriter);
  }
  
  
  // 99, 1
  private void __jamon_innerUnit____method(final java.io.Writer jamonWriter, final Register r)
    throws java.io.IOException
  {
    // 103, 1
    
String method;
int nDims = ndims(r);
boolean multi = r.getEntryWidth() > 1;
switch (nDims) {
    case 0:
        method = multi ? "MULTIWRD" : "SCALAR";
        break;
    case 1:
        method = multi ? "MWINDEX" : "INDEXED";
        break;
    case 2:
        method = multi ? "DBLINDEX" : "MWDBLIDX";
        break;
    case 3:
        method = multi ? "MWTPLIDX" : "TPLINDEX";
        break;
    default:
        throw new Error(nDims + "-dimensional registers not supported");
}
String s = String.format("%s,", method);

    // 125, 1
    org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(String.format("%-10s", s)), jamonWriter);
  }
  
  
  // 66, 1
  private void __jamon_innerUnit____flags(final java.io.Writer jamonWriter, final Register r)
    throws java.io.IOException
  {
    // 70, 1
    
int[] flags = new int[2];
switch (ndims(r)) {
    case 1:
        if (r.getNumEntries() == numPorts) {
            flags[0] = 1;
        } else if (r.getNumEntries() == numEpls) {
            flags[0] = 4;
        }
        break;
    case 2:
        if (r.getNumEntries1() == numPorts) {
            flags[0] = 2;
        } else if (r.getNumEntries1() == numEpls && r.getNumEntries() == numLanes) {
            flags[0] = 8;
        }
        break;
}
flags[1] = Pattern.matches(".*STATS_.*", r.getName()) ? 1 : 0;
String s = String.format("0x%1X%1X,", flags[1], flags[0]);

    // 91, 1
    org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(String.format("%-6s", s)), jamonWriter);
  }
  
  
  // 93, 1
  private void __jamon_innerUnit____group(final java.io.Writer jamonWriter, final Register r)
    throws java.io.IOException
  {
    // 97, 1
    org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(String.format("%-6s", "0x0,")), jamonWriter);
  }
  
  
  // 159, 1
  private void __jamon_innerUnit____width(final java.io.Writer jamonWriter, final Register r)
    throws java.io.IOException
  {
    // 163, 1
    org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(String.format("%-6s", r.getEntryWidth() + ",")), jamonWriter);
  }
  
  
  // 8, 1
  private void __jamon_innerUnit____diminfo(final java.io.Writer jamonWriter, final Register r, final int d, final boolean offset, final boolean max, final boolean stride)
    throws java.io.IOException
  {
    // 16, 1
    
int[] o = new int[3];
int[] m = new int[3];
int[] s = new int[3];
int nDims = ndims(r);
switch (nDims) {
    case 0:
        break;
    case 1:
        o[0] = r.getBaseEntry();
        m[0] = r.getNumEntries();
        s[0] = r.getEntrySpace();
        break;
    case 2:
        o[0] = r.getBaseEntry1();
        o[1] = r.getBaseEntry();
        m[0] = r.getNumEntries1();
        m[1] = r.getNumEntries();
        s[0] = r.getEntrySpace1();
        s[1] = r.getEntrySpace();
        break;
    case 3:
        o[0] = r.getBaseEntry2();
        o[1] = r.getBaseEntry1();
        o[2] = r.getBaseEntry();
        m[0] = r.getNumEntries2();
        m[1] = r.getNumEntries1();
        m[2] = r.getNumEntries();
        s[0] = r.getEntrySpace2();
        s[1] = r.getEntrySpace1();
        s[2] = r.getEntrySpace();
        break;
    default:
        throw new Error(nDims + "-dimensional registers not supported");
}

    // 53, 1
    
for (int i = 0; i < m.length; i++) {
    m[i] = Math.max(0, m[i] - 1);
}

    // 58, 1
    if (offset )
    {
      // 59, 1
      org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(String.format("%-7s", o[d] + ",")), jamonWriter);
    }
    // 60, 1
    else if (max )
    {
      // 61, 1
      org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(String.format("%-7s", m[d] + ",")), jamonWriter);
    }
    // 62, 1
    else if (stride )
    {
      // 63, 1
      {
        // 63, 1
        __jamon_innerUnit____strfaddr(jamonWriter, s[d] );
      }
    }
  }
  
  
}
