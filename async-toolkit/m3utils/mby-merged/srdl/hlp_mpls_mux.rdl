// INTEL TOP SECRET
// Copyright 2014 Intel Corporation. All Rights Reserved.

`include "hlp_udp.rdl"
<% use security; %>
<% my %Security_Props = security::GetSecurityInfo(); %>

reg mpls_mux_exp_ds_r {
  Security_PolicyGroup     = <%=$Security_Props{'HLP_PG1'}%>;
  Security_ReadAccess_Str  = <%=$Security_Props{'HLP_PG1_RAC_AGENTS'}%>;
  Security_WriteAccess_Str = <%=$Security_Props{'HLP_PG1_WAC_AGENTS'}%>;
  shared;
  HandCoded   = true;
  name        = "EXP to DS translation table";
  desc        = "
    EXPerimental to DS (differentiated service) translation table.  Indexed by {priority_profile[4:0], exp[2:0]}.
  ";
  regwidth    = 64;
  accesswidth = 64;
  field {
    AccessType = "RW"; ValRandomize = true;
    desc = "Differentiated service.";
  } DSCP[11:6] = 6'h0;
  field {
    AccessType = "RW"; ValRandomize = true;
    desc = "Explicit congestion notification.";
  } ECN[5:4] = 2'h0;
  field {
    AccessType = "RW"; ValRandomize = true;
    desc = "Traffic class.";
  } TC[3:0] = 4'h0;
};

reg mpls_mux_dscp_tc_r {
  Security_PolicyGroup     = <%=$Security_Props{'HLP_PG1'}%>;
  Security_ReadAccess_Str  = <%=$Security_Props{'HLP_PG1_RAC_AGENTS'}%>;
  Security_WriteAccess_Str = <%=$Security_Props{'HLP_PG1_WAC_AGENTS'}%>;
  shared;
  HandCoded = true;
  name = "Maps DSCP to traffic class";
  desc = "Supports using TC_CTRL FFU action to set TC to a value mapped from either outer/inner DSCP. Indexed by {dscp[5:0]}";
  regwidth = 64;
  accesswidth = 64;
  field {
    AccessType = "RW";
    desc = "
      Traffic class (TC) to set for this DSCP.
    ";
    ValRandomize = true;
  } TC[3:0] = 4'h0;
};

addrmap hlp_MPLS_MUX_map {
  name         = "hlp_MPLS_MUX";
  desc         = "MPLS Mux Registers";
  addressing = fullalign;
  Space = "MSG";
  Opcode = "MEM-SB";
  No_IOSF_Primary=true;
  AddressBits  = 15;
  ResetDomains = "SWITCH,MGMT";

  mpls_mux_exp_ds_r    MPLS_MUX_EXP_DS[256]    @0x00000 += 8;
  mpls_mux_dscp_tc_r   MPLS_MUX_DSCP_TC[64]    @0x00800 += 8;
};
