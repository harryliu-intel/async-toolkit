import("parserlib")
import("cit_util")
import("mscheme")
import("sstubgen")
import("modula3scheme")
import("parseparams")

Token("liberty")
Lexer("liberty", "liberty")
Parser("liberty", "liberty")

Extended("libertyLexStd")
Extended("libertyParseStd")

implementation ("TestParse")

%library ("libertyparse")

Module ("LibertyComponent")
Module ("LibertyDefine")
Module ("LibertyDefineGroup")
Module ("LibertyBoolean")
Module ("LibertyAttrVal")
Module ("LibertyAttrValExpr")
Module ("LibertyExpr")
Module ("LibertyNumber")
Module ("LibertySorI")
Module ("LibertyParamList")
Module ("LibertyHead")
Module ("LibertyComplexAttr")
Module ("LibertySimpleAttr")
Interface ("LibertyStatement")
Module ("LibertyGroup")

Sequence ("LibertyAttrVal", "LibertyAttrVal")
Sequence ("LibertyStatement", "LibertyStatement")

Table    ("LibertyComponentRef", "LibertyComponent", "Refany")
MkSet    ("LibertyComponent", "LibertyComponent")
MkSetDef ("LibertyComponent", "LibertyComponent")
Sequence ("LibertyComponent", "LibertyComponent")

Module ("LibertyComponentSeqBuilder")
Interface ("LibertyComponentChildren")

Module ("LibertyParse")
Module ("LibertyCsv")
Module ("LibertyArcs")

Module ("LibertyUtils")

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% stubs for the parser types
SchemeStubs ("LibertyComponent")
SchemeStubs ("LibertyDefine")
SchemeStubs ("LibertyDefineGroup")
SchemeStubs ("LibertyBoolean")
SchemeStubs ("LibertyAttrVal")
SchemeStubs ("LibertyAttrValExpr")
SchemeStubs ("LibertyExpr")
SchemeStubs ("LibertyNumber")
SchemeStubs ("LibertySorI")
SchemeStubs ("LibertyParamList")
SchemeStubs ("LibertyHead")
SchemeStubs ("LibertyComplexAttr")
SchemeStubs ("LibertySimpleAttr")
SchemeStubs ("LibertyStatement")
SchemeStubs ("LibertyGroup")

% stubs for complex types
SchemeStubs ("LibertyAttrValSeq")

% stubs for utility code
SchemeStubs ("LibertyComponentChildren")
SchemeStubs ("LibertyComponentSeq")
SchemeStubs ("LibertyStatementSeq")
SchemeStubs ("LibertyParse")
SchemeStubs ("LibertyCsv")
SchemeStubs ("LibertyArcs")

% general M3 stubs needed by us
SchemeStubs ("RTType") % needed for type reflection ops

SchemeStubs ("TextWr") % stuff for writing output
SchemeStubs ("FileWr")
SchemeStubs ("Wr")
SchemeStubs ("TextRd")
SchemeStubs ("FileRd")
SchemeStubs ("Rd")

SchemeStubs ("Pickle")

SchemeStubs ("TextUtils")
SchemeStubs ("Text")
SchemeStubs ("TextList")

SchemeStubs ("ParseParams")
SchemeStubs ("Stdio")

SchemeStubs ("LibertyUtils")

ExportSchemeStubs ("liberty")
importSchemeStubs()

program("testparse")



