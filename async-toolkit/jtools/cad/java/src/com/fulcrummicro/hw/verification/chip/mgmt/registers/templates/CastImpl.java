// Autogenerated Jamon implementation
// /nfs/sc/proj/ctg/mrl108/rliu68/sw-intel6/cad/java/src/./com/fulcrummicro/hw/verification/chip/mgmt/registers/templates/Cast.jamon

package com.fulcrummicro.hw.verification.chip.mgmt.registers.templates;

// 3, 1
import java.util.Collection;
// 4, 1
import com.fulcrummicro.util.misc.Utility;
// 5, 1
import com.fulcrummicro.hw.verification.chip.mgmt.registers.*;
// 6, 1
import com.fulcrummicro.hw.verification.lib.constants.ConstantsEnum;

public class CastImpl
  extends com.fulcrummicro.hw.verification.chip.mgmt.registers.templates.CastCommonImpl
  implements com.fulcrummicro.hw.verification.chip.mgmt.registers.templates.Cast.Intf

{
  private final Collection<RegisterBase> bases;
  private final Collection<Register> regs;
  private final String chip;
  protected static com.fulcrummicro.hw.verification.chip.mgmt.registers.templates.Cast.ImplData __jamon_setOptionalArguments(com.fulcrummicro.hw.verification.chip.mgmt.registers.templates.Cast.ImplData p_implData)
  {
    com.fulcrummicro.hw.verification.chip.mgmt.registers.templates.CastCommonImpl.__jamon_setOptionalArguments(p_implData);
    return p_implData;
  }
  public CastImpl(org.jamon.TemplateManager p_templateManager, com.fulcrummicro.hw.verification.chip.mgmt.registers.templates.Cast.ImplData p_implData)
  {
    super(p_templateManager, __jamon_setOptionalArguments(p_implData));
    bases = p_implData.getBases();
    regs = p_implData.getRegs();
    chip = p_implData.getChip();
  }
  
  @Override protected void child_render_2(final java.io.Writer jamonWriter)
    throws java.io.IOException
  {
    // 12, 9
    jamonWriter.write("module core.neuro.");
    // 13, 19
    org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(chip), jamonWriter);
    // 13, 29
    jamonWriter.write(".registers;\n\ndefine AddressSpace ()() attributes {\n\n //  Register_Name                            incremental  absolute  base\n");
    // 18, 1
    for (RegisterBase base : bases )
    {
      // 18, 35
      jamonWriter.write(" int ");
      // 19, 6
      org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(String.format("%-40s", base.getFullName())), jamonWriter);
      // 19, 54
      jamonWriter.write(" = 0x");
      // 19, 59
      org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(String.format("%05X", base.getIncrementalAddress())), jamonWriter);
      // 19, 116
      jamonWriter.write("; // 0x");
      // 20, 7
      org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(String.format("%05X", base.getAbsoluteAddress())), jamonWriter);
      // 20, 61
      jamonWriter.write(" ");
      // 20, 62
      org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(base.getParent().getFullName()), jamonWriter);
      // 20, 98
      jamonWriter.write("\n int ");
      // 21, 6
      org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(String.format("%-40s", base.getName() + "_SIZE")), jamonWriter);
      // 21, 60
      jamonWriter.write(" = 0x");
      // 21, 65
      org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(String.format("%05X", base.getSize())), jamonWriter);
      // 21, 108
      jamonWriter.write(";\n");
    }
    // 22, 8
    jamonWriter.write("\n");
    // 27, 1
    for (Register reg : regs )
    {
      // 28, 1
      String postfix = (reg.getNumEntries() > 1) ? "_BASE" : "_ADDR"; 
      // 29, 1
      String entriesPostfix = (reg.getNumEntries1() > 1) ? "_0" : ""; 
      // 29, 74
      jamonWriter.write(" int ");
      // 30, 6
      org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(String.format("%-40s", reg.getName() + postfix)), jamonWriter);
      // 30, 59
      jamonWriter.write(" = 0x");
      // 31, 4
      org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(String.format("%05X", reg.getAddressSafe())), jamonWriter);
      // 31, 53
      jamonWriter.write("; // 0x");
      // 32, 7
      org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(String.format("%05X", reg.getAddressOffset())), jamonWriter);
      // 32, 58
      jamonWriter.write(" ");
      // 32, 59
      org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getBaseName()), jamonWriter);
      // 32, 82
      jamonWriter.write("\n");
      // 33, 1
      if (reg.getNumEntries() > 1 )
      {
        // 33, 32
        jamonWriter.write(" int ");
        // 34, 6
        org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(String.format("%-40s", reg.getName() + "_BASE_MASK" + entriesPostfix)), jamonWriter);
        // 34, 81
        jamonWriter.write(" = 0x");
        // 35, 4
        org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(String.format("%05X", reg.getAddressMatchMask())), jamonWriter);
        // 35, 58
        jamonWriter.write(";\n int ");
        // 36, 6
        org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(String.format("%-40s", reg.getName() + "_STRIDE" + entriesPostfix)), jamonWriter);
        // 36, 78
        jamonWriter.write(" = 0x");
        // 37, 4
        org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(String.format("%05X", reg.getEntrySpace())), jamonWriter);
        // 37, 52
        jamonWriter.write(";\n");
      }
      // 39, 1
      if (reg.getNumEntries1() > 1 )
      {
        // 39, 33
        jamonWriter.write(" int ");
        // 40, 6
        org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(String.format("%-40s", reg.getName() + "_STRIDE_1")), jamonWriter);
        // 40, 63
        jamonWriter.write(" = 0x");
        // 41, 4
        org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(String.format("%05X", reg.getEntrySpace1())), jamonWriter);
        // 41, 53
        jamonWriter.write(";\n");
      }
      // 43, 1
      if (reg.getNumEntries2() > 1 )
      {
        // 43, 33
        jamonWriter.write(" int ");
        // 44, 6
        org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(String.format("%-40s", reg.getName() + "_STRIDE_2")), jamonWriter);
        // 44, 63
        jamonWriter.write(" = 0x");
        // 45, 4
        org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(String.format("%05X", reg.getEntrySpace2())), jamonWriter);
        // 45, 53
        jamonWriter.write(";\n");
      }
      // 46, 7
      jamonWriter.write(" int ");
      // 47, 6
      org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(String.format("%-40s", reg.getName() + "_BITS")), jamonWriter);
      // 47, 59
      jamonWriter.write(" = ");
      // 47, 62
      org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getNumberFieldBits()), jamonWriter);
      // 47, 92
      jamonWriter.write(";\n int ");
      // 48, 6
      org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(String.format("%-40s", reg.getName() + "_IMPL_BITS")), jamonWriter);
      // 48, 64
      jamonWriter.write(" = ");
      // 48, 67
      org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getImplementationWidth()), jamonWriter);
      // 48, 101
      jamonWriter.write(";\n int ");
      // 49, 6
      org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(String.format("%-40s", reg.getName() + "_SRAM_BITS")), jamonWriter);
      // 49, 64
      jamonWriter.write(" = ");
      // 49, 67
      org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getSramWidth()), jamonWriter);
      // 49, 91
      jamonWriter.write(";\n int ");
      // 50, 6
      org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(String.format("%-40s", reg.getName() + "_WIDTH")), jamonWriter);
      // 50, 60
      jamonWriter.write(" = ");
      // 50, 63
      org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getEntryWidth()), jamonWriter);
      // 50, 88
      jamonWriter.write(";\n int ");
      // 51, 6
      org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(String.format("%-40s", reg.getName() + "_ATOMIC_WIDTH")), jamonWriter);
      // 51, 67
      jamonWriter.write(" = ");
      // 51, 70
      org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getAtomicWidth()), jamonWriter);
      // 51, 96
      jamonWriter.write(";\n");
      // 54, 1
      if (reg.getNumDefaults() == 1 )
      {
        // 54, 34
        jamonWriter.write(" int ");
        // 55, 6
        org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(String.format("%-40s", reg.getName() + "_DEFAULT")), jamonWriter);
        // 55, 62
        jamonWriter.write(" = 0x");
        // 55, 67
        org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(String.format("%x", reg.getDefault(0))), jamonWriter);
        // 55, 111
        jamonWriter.write(";\n");
      }
      // 56, 1
      else
      {
        // 56, 8
        jamonWriter.write(" int ");
        // 57, 6
        org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getName()), jamonWriter);
        // 57, 25
        jamonWriter.write("_DEFAULT[0..");
        // 57, 37
        org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getNumDefaults()-1), jamonWriter);
        // 57, 65
        jamonWriter.write("];\n");
        // 58, 1
        for (int i = 0; i < reg.getNumDefaults(); i++ )
        {
          // 58, 50
          jamonWriter.write("     ");
          // 59, 6
          org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(String.format("%-40s", reg.getName() + "_DEFAULT[" + i + "]")), jamonWriter);
          // 59, 73
          jamonWriter.write(" = 0x");
          // 59, 78
          org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(String.format("%x", reg.getDefault(i))), jamonWriter);
          // 59, 122
          jamonWriter.write(";\n");
        }
      }
      // 64, 1
      if (reg.getNumEntries() > 1 )
      {
        // 64, 32
        jamonWriter.write(" int ");
        // 65, 6
        org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(String.format("%-40s", reg.getName() + "_ENTRIES" + entriesPostfix)), jamonWriter);
        // 65, 79
        jamonWriter.write(" = ");
        // 65, 82
        org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getNumEntries()), jamonWriter);
        // 65, 107
        jamonWriter.write(";\n");
      }
      // 67, 1
      if (reg.getNumEntries1() > 1 )
      {
        // 67, 33
        jamonWriter.write(" int ");
        // 68, 6
        org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(String.format("%-40s", reg.getName() + "_ENTRIES_1")), jamonWriter);
        // 68, 64
        jamonWriter.write(" = ");
        // 68, 67
        org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getNumEntries1()), jamonWriter);
        // 68, 93
        jamonWriter.write(";\n");
      }
      // 70, 1
      if (reg.getNumEntries2() > 1 )
      {
        // 70, 33
        jamonWriter.write(" int ");
        // 71, 6
        org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(String.format("%-40s", reg.getName() + "_ENTRIES_2")), jamonWriter);
        // 71, 64
        jamonWriter.write(" = ");
        // 71, 67
        org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getNumEntries2()), jamonWriter);
        // 71, 93
        jamonWriter.write(";\n");
      }
      // 72, 7
      jamonWriter.write(" int ");
      // 74, 6
      org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(String.format("%-40s", reg.getName() + "_STRUCT_ID")), jamonWriter);
      // 74, 64
      jamonWriter.write(" = ");
      // 74, 67
      org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getStructId()), jamonWriter);
      // 74, 90
      jamonWriter.write(";\n");
    }
    // 75, 8
    jamonWriter.write("\n}\n\n");
    // 82, 1
    for (RegisterBase base : bases )
    {
      // 82, 35
      jamonWriter.write("\n");
      // 83, 1
      String camelCaseBaseName = Utility.underscoreToCamelCase(base.getName(), true); 
      // 84, 1
      jamonWriter.write("define ");
      // 84, 8
      org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(camelCaseBaseName), jamonWriter);
      // 84, 31
      jamonWriter.write("RegisterFields ()() attributes {\n\n");
      // 86, 1
      for (Register reg : base.getRegisters() )
      {
        // 87, 1
        for (RegisterField field : reg.fields.values() )
        {
          // 88, 1
          if (field.len == 1 )
          {
            // 88, 23
            jamonWriter.write("  int ");
            // 89, 7
            org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(String.format("%-40s", reg.getName() + "_b_" + field.desc)), jamonWriter);
            // 89, 71
            jamonWriter.write(" = ");
            // 89, 74
            org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(field.pos), jamonWriter);
            // 89, 89
            jamonWriter.write(";\n");
          }
          // 90, 1
          else
          {
            // 90, 8
            jamonWriter.write("  int ");
            // 91, 7
            org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(String.format("%-40s", reg.getName() + "_l_" + field.desc)), jamonWriter);
            // 91, 71
            jamonWriter.write(" = ");
            // 91, 74
            org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(field.pos), jamonWriter);
            // 91, 89
            jamonWriter.write(";\n  int ");
            // 92, 7
            org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(String.format("%-40s", reg.getName() + "_h_" + field.desc)), jamonWriter);
            // 92, 71
            jamonWriter.write(" = ");
            // 92, 74
            org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(field.pos + field.len - 1), jamonWriter);
            // 92, 105
            jamonWriter.write(";\n  int ");
            // 93, 7
            org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(String.format("%-40s", reg.getName() + "_w_" + field.desc)), jamonWriter);
            // 93, 71
            jamonWriter.write(" = ");
            // 93, 74
            org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(field.len), jamonWriter);
            // 93, 89
            jamonWriter.write(";\n");
          }
          // 96, 1
          if (field.typedef != null && !base.getEnums().contains(field.typedef) && (field.currentEntry == field.baseEntry) )
          {
            // 96, 117
            org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(field.typedef.toCast()), jamonWriter);
          }
        }
        // 97, 8
        jamonWriter.write("  int ");
        // 98, 7
        org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(String.format("%-40s", reg.getName() + "_RW_MASK")), jamonWriter);
        // 98, 63
        jamonWriter.write(" = 0x");
        // 98, 68
        org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getTypeMask(RegisterType.RW).toHexString()), jamonWriter);
        // 98, 120
        jamonWriter.write(";\n  int ");
        // 99, 7
        org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(String.format("%-40s", reg.getName() + "_RO_MASK")), jamonWriter);
        // 99, 63
        jamonWriter.write(" = 0x");
        // 99, 68
        org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getTypeMask(RegisterType.RO).toHexString()), jamonWriter);
        // 99, 120
        jamonWriter.write(";\n  int ");
        // 100, 7
        org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(String.format("%-40s", reg.getName() + "_CW_MASK")), jamonWriter);
        // 100, 63
        jamonWriter.write(" = 0x");
        // 100, 68
        org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getTypeMask(RegisterType.CW).toHexString()), jamonWriter);
        // 100, 120
        jamonWriter.write(";\n  int ");
        // 101, 7
        org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(String.format("%-40s", reg.getName() + "_CW1_MASK")), jamonWriter);
        // 101, 64
        jamonWriter.write(" = 0x");
        // 101, 69
        org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getTypeMask(RegisterType.CW1).toHexString()), jamonWriter);
        // 101, 122
        jamonWriter.write(";\n  int ");
        // 102, 7
        org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(String.format("%-40s", reg.getName() + "_WO_MASK")), jamonWriter);
        // 102, 63
        jamonWriter.write(" = 0x");
        // 102, 68
        org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getTypeMask(RegisterType.WO).toHexString()), jamonWriter);
        // 102, 120
        jamonWriter.write(";\n  int ");
        // 103, 7
        org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(String.format("%-40s", reg.getName() + "_RV_MASK")), jamonWriter);
        // 103, 63
        jamonWriter.write(" = 0x");
        // 103, 68
        org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getUnusedOrReservedMask().toHexString()), jamonWriter);
        // 103, 117
        jamonWriter.write(";\n");
      }
      // 106, 1
      for (ConstantsEnum e : base.getEnums() )
      {
        // 106, 43
        org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(e.toCast()), jamonWriter);
      }
      // 106, 66
      jamonWriter.write("\n  csp {\n");
      // 110, 1
      for (RegisterStruct rs : base.getStructs() )
      {
        // 111, 1
        {
          // 111, 1
          __jamon_innerUnit__structure(jamonWriter, rs );
        }
        // 111, 23
        jamonWriter.write("\n");
      }
      // 113, 1
      for (Register reg : base.getRegisters() )
      {
        // 114, 1
        {
          // 114, 1
          __jamon_innerUnit__structure(jamonWriter, reg );
        }
      }
      // 115, 8
      jamonWriter.write("  }\n}\n");
    }
    // 118, 8
    jamonWriter.write("\n\n\n");
    // 140, 1
    for (RegisterBase base : bases )
    {
      // 140, 35
      jamonWriter.write("\n");
      // 141, 1
      for (String group : base.getGroups() )
      {
        // 141, 41
        jamonWriter.write("\n");
        // 142, 1
        
String baseName = base.getName(); if(group != null) baseName += "_" + group.toUpperCase();
String camelCaseBaseName = Utility.underscoreToCamelCase(baseName, true);
int maxAtomicWidth = 1; for(Register reg : base.getRegisters()) {maxAtomicWidth=Math.max(maxAtomicWidth,reg.getAtomicWidth());}
Collection<Register> registers = base.getRegisters("group", group);
int maxSramBits = 1; for(Register reg : registers) {maxSramBits=Math.max(maxSramBits,reg.getImplementationWidth());}
int mgmtDataBits = (group == null) ? 32*maxAtomicWidth : maxSramBits;

        // 149, 9
        jamonWriter.write("define ");
        // 150, 8
        org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(camelCaseBaseName), jamonWriter);
        // 150, 31
        jamonWriter.write("Management() attributes\n  <+ ");
        // 151, 6
        org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(Utility.underscoreToCamelCase(base.getName(), true)), jamonWriter);
        // 151, 63
        jamonWriter.write("RegisterFields\n");
        // 152, 1
        if (group == null )
        {
          // 152, 22
          for (String g : base.getGroups() )
          {
            // 152, 58
            if (g != null )
            {
              // 152, 75
              jamonWriter.write("  <+ ");
              // 153, 6
              org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(Utility.underscoreToCamelCase(base.getName() + "_" + g.toUpperCase(), true)), jamonWriter);
              // 153, 87
              jamonWriter.write("Management\n");
            }
          }
        }
        // 154, 20
        jamonWriter.write("  <+ AddressSpace \n  <+ core.neuro.v2.register_functions.RegisterFunctions {\n  int ");
        // 157, 7
        org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(baseName), jamonWriter);
        // 157, 21
        jamonWriter.write("_MGMT_BITS = ");
        // 157, 34
        org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(mgmtDataBits), jamonWriter);
        // 157, 52
        jamonWriter.write(";\n  csp {\n");
        // 160, 1
        {
          // 160, 1
          __jamon_innerUnit__registerStructureBase(jamonWriter, registers, camelCaseBaseName );
        }
        // 160, 86
        jamonWriter.write("\n");
        // 161, 1
        if (group == null )
        {
          // 161, 22
          for (String g : base.getGroups() )
          {
            // 161, 58
            if (g != null )
            {
              // 161, 75
              jamonWriter.write("      ");
              // 162, 7
              org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(Utility.underscoreToCamelCase(base.getName() + "_" + g.toUpperCase(), true)), jamonWriter);
              // 162, 88
              jamonWriter.write("Registers ");
              // 162, 98
              org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(g.toLowerCase()), jamonWriter);
              // 162, 119
              jamonWriter.write(";\n");
            }
          }
        }
        // 163, 20
        jamonWriter.write("    );\n\n");
        // 168, 1
        {
          com.fulcrummicro.hw.verification.chip.mgmt.registers.templates.CastMgmtTcam __jamon__var_0 = new com.fulcrummicro.hw.verification.chip.mgmt.registers.templates.CastMgmtTcam(this.getTemplateManager());
          __jamon__var_0.renderNoFlush(jamonWriter, base, registers, camelCaseBaseName );
        }
        // 168, 91
        jamonWriter.write("\n\n");
        // 172, 1
        for (Register reg : registers )
        {
          // 172, 34
          if (reg.getAlias() == null )
          {
            // 172, 64
            jamonWriter.write("    function addressIs");
            // 173, 23
            org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(Utility.underscoreToCamelCase(reg.getName(), true)), jamonWriter);
            // 173, 79
            jamonWriter.write("(int(16) -chip_addr) : boolean = (\n      addressIs");
            // 174, 16
            org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(Utility.underscoreToCamelCase(reg.getName(), true)), jamonWriter);
            // 174, 72
            jamonWriter.write(" = ");
            // 174, 75
            {
              // 174, 75
              __jamon_innerUnit__registerAddressGuardExpr(jamonWriter, reg);
            }
            // 174, 115
            jamonWriter.write("\n    );\n");
          }
        }
        // 176, 14
        jamonWriter.write("\n");
        // 180, 1
        for (Register reg : registers )
        {
          // 180, 34
          if (reg.getAlias() == null )
          {
            // 180, 64
            jamonWriter.write("    function getAtomicWordNumber");
            // 181, 33
            org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(Utility.underscoreToCamelCase(reg.getName(), true)), jamonWriter);
            // 181, 89
            jamonWriter.write("(int(16) -chip_addr) : int(8) = (\n");
            // 182, 1
            if (reg.getAtomicWidth() >= reg.getEntryWidth() )
            {
              // 182, 52
              jamonWriter.write("      getAtomicWordNumber");
              // 183, 26
              org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(Utility.underscoreToCamelCase(reg.getName(), true)), jamonWriter);
              // 183, 82
              jamonWriter.write(" = 0\n");
            }
            // 184, 1
            else
            {
              // 184, 8
              jamonWriter.write("      int(4) atomicWordBits = log2(");
              // 185, 36
              org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getName()), jamonWriter);
              // 185, 55
              jamonWriter.write("_ATOMIC_WIDTH);\n      int(4) widthBits = log2(");
              // 186, 31
              org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getName()), jamonWriter);
              // 186, 50
              jamonWriter.write("_WIDTH);\n      getAtomicWordNumber");
              // 187, 26
              org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(Utility.underscoreToCamelCase(reg.getName(), true)), jamonWriter);
              // 187, 82
              jamonWriter.write(" = chip_addr{widthBits-1:atomicWordBits}\n");
            }
            // 188, 7
            jamonWriter.write("    );\n");
          }
        }
        // 190, 14
        jamonWriter.write("\n");
        // 194, 1
        for (Register reg : registers )
        {
          // 194, 34
          if ((reg.getAlias() == null) && (reg.getNumEntries() > 1) )
          {
            // 194, 95
            jamonWriter.write("    function getEntryAddress");
            // 195, 29
            org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(Utility.underscoreToCamelCase(reg.getName(), true)), jamonWriter);
            // 195, 85
            jamonWriter.write("(int(16) -chip_addr) : int(16) = (\n      int(8) entryBits = log2(");
            // 196, 31
            org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getName()), jamonWriter);
            // 196, 50
            jamonWriter.write("_ENTRIES");
            // 196, 58
            if (reg.getNumEntries1()>1 )
            {
              // 196, 88
              jamonWriter.write("_0");
            }
            // 196, 96
            jamonWriter.write(");\n      getEntryAddress");
            // 197, 22
            org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(Utility.underscoreToCamelCase(reg.getName(), true)), jamonWriter);
            // 197, 78
            jamonWriter.write(" = (chip_addr >> log2(");
            // 197, 100
            org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getName()), jamonWriter);
            // 197, 119
            jamonWriter.write("_STRIDE");
            // 197, 126
            if (reg.getNumEntries1()>1 )
            {
              // 197, 156
              jamonWriter.write("_0");
            }
            // 197, 164
            jamonWriter.write(")) & ((1<<entryBits) - 1)\n    );\n");
          }
        }
        // 199, 14
        jamonWriter.write("\n");
        // 203, 1
        for (Register reg : registers )
        {
          // 203, 34
          if ((reg.getAlias() == null) && (reg.getNumEntries1() > 1) )
          {
            // 203, 96
            jamonWriter.write("    function getEntry1Address");
            // 204, 30
            org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(Utility.underscoreToCamelCase(reg.getName(), true)), jamonWriter);
            // 204, 86
            jamonWriter.write("(int(16) -chip_addr) : int(16) = (\n      int(8) entry1Bits = log2(");
            // 205, 32
            org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getName()), jamonWriter);
            // 205, 51
            jamonWriter.write("_ENTRIES_1);\n      getEntry1Address");
            // 206, 23
            org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(Utility.underscoreToCamelCase(reg.getName(), true)), jamonWriter);
            // 206, 79
            jamonWriter.write(" = (chip_addr >> log2(");
            // 206, 101
            org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getName()), jamonWriter);
            // 206, 120
            jamonWriter.write("_STRIDE_1)) & ((1<<entry1Bits) - 1)\n    );\n");
          }
        }
        // 208, 14
        jamonWriter.write("\n");
        // 212, 1
        for (Register reg : registers )
        {
          // 212, 34
          if ((reg.getAlias() == null) && (reg.getNumEntries2() > 1) )
          {
            // 212, 96
            jamonWriter.write("    function getEntry2Address");
            // 213, 30
            org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(Utility.underscoreToCamelCase(reg.getName(), true)), jamonWriter);
            // 213, 86
            jamonWriter.write("(int(16) -chip_addr) : int(16) = (\n      int(8) entry2Bits = log2(");
            // 214, 32
            org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getName()), jamonWriter);
            // 214, 51
            jamonWriter.write("_ENTRIES_2);\n      getEntry2Address");
            // 215, 23
            org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(Utility.underscoreToCamelCase(reg.getName(), true)), jamonWriter);
            // 215, 79
            jamonWriter.write(" = (chip_addr >> log2(");
            // 215, 101
            org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getName()), jamonWriter);
            // 215, 120
            jamonWriter.write("_STRIDE_2)) & ((1<<entry2Bits) - 1)\n    );\n");
          }
        }
        // 217, 14
        jamonWriter.write("\n");
        // 221, 1
        for (Register reg : registers )
        {
          // 221, 34
          if (reg.getAlias() == null )
          {
            // 222, 1
            String index = ""; 
            // 222, 29
            jamonWriter.write("    function manageReg");
            // 223, 23
            org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(Utility.underscoreToCamelCase(reg.getName(), true)), jamonWriter);
            // 223, 79
            jamonWriter.write("(int(1) -rw; int(16) -chip_addr; int(32) -+data; ");
            // 224, 1
            if (reg.isStructure() )
            {
              // 224, 26
              jamonWriter.write("Reg");
              // 224, 29
              org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(Utility.underscoreToCamelCase(reg.getName(), true)), jamonWriter);
            }
            // 224, 85
            else
            {
              // 224, 92
              jamonWriter.write("int(");
              // 224, 96
              org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getName()), jamonWriter);
              // 224, 115
              jamonWriter.write("_BITS)");
            }
            // 224, 127
            jamonWriter.write(" -+s");
            // 225, 1
            if (reg.getNumEntries() > 1 )
            {
              // 225, 32
              jamonWriter.write("[0..");
              // 225, 36
              org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getName()), jamonWriter);
              // 225, 55
              jamonWriter.write("_ENTRIES-1]");
            }
            // 226, 1
            else if (reg.getNumEntries1() > 1 )
            {
              // 226, 37
              jamonWriter.write("[0..");
              // 226, 41
              org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getName()), jamonWriter);
              // 226, 60
              jamonWriter.write("_ENTRIES1-1,0..");
              // 226, 75
              org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getName()), jamonWriter);
              // 226, 94
              jamonWriter.write("_ENTRIES0-1]");
            }
            // 227, 1
            else if (reg.getNumEntries2() > 1 )
            {
              // 227, 37
              jamonWriter.write("[0..");
              // 227, 41
              org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getName()), jamonWriter);
              // 227, 60
              jamonWriter.write("_ENTRIES2-1,0..");
              // 227, 75
              org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getName()), jamonWriter);
              // 227, 94
              jamonWriter.write("_ENTRIES1-1,0..");
              // 227, 109
              org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getName()), jamonWriter);
              // 227, 128
              jamonWriter.write("_ENTRIES0-1]");
            }
            // 228, 7
            jamonWriter.write(") = (\n      int(");
            // 230, 11
            org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getImplementationWidth()), jamonWriter);
            // 230, 45
            jamonWriter.write(") data_atomic;\n");
            // 231, 18
            if (reg.getEntryWidth() > 1 )
            {
              // 231, 49
              jamonWriter.write("      int(8) atomic_word = getAtomicWordNumber");
              // 232, 47
              org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(Utility.underscoreToCamelCase(reg.getName(), true)), jamonWriter);
              // 232, 103
              jamonWriter.write("(chip_addr);\n");
            }
            // 233, 18
            else
            {
              // 233, 25
              jamonWriter.write("      int(8) atomic_word = 0;\n");
            }
            // 236, 18
            if (reg.getNumEntries() > 1 )
            {
              // 236, 49
              jamonWriter.write("      int(16) i0 = getEntryAddress");
              // 237, 35
              org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(Utility.underscoreToCamelCase(reg.getName(), true)), jamonWriter);
              // 237, 91
              jamonWriter.write("(chip_addr);\n");
              // 238, 1
              index = "[i0]"; 
            }
            // 240, 18
            if (reg.getNumEntries1() > 1 )
            {
              // 240, 50
              jamonWriter.write("      int(16) i1 = getEntry1Address");
              // 241, 36
              org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(Utility.underscoreToCamelCase(reg.getName(), true)), jamonWriter);
              // 241, 92
              jamonWriter.write("(chip_addr);\n");
              // 242, 1
              index = "[i1, i0]"; 
            }
            // 244, 18
            if (reg.getNumEntries2() > 1 )
            {
              // 244, 50
              jamonWriter.write("      int(16) i2 = getEntry2Address");
              // 245, 36
              org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(Utility.underscoreToCamelCase(reg.getName(), true)), jamonWriter);
              // 245, 92
              jamonWriter.write("(chip_addr);\n");
              // 246, 1
              index = "[i2, i1, i0]"; 
            }
            // 248, 18
            if (reg.isStructure() )
            {
              // 248, 43
              jamonWriter.write("      int(");
              // 249, 11
              org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getImplementationWidth()), jamonWriter);
              // 249, 45
              jamonWriter.write(") reg = pack(s");
              // 249, 59
              org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(index), jamonWriter);
              // 249, 70
              jamonWriter.write(");\n");
            }
            // 250, 18
            else
            {
              // 250, 25
              jamonWriter.write("      int(");
              // 251, 11
              org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getImplementationWidth()), jamonWriter);
              // 251, 45
              jamonWriter.write(") reg = s");
              // 251, 54
              org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(index), jamonWriter);
              // 251, 65
              jamonWriter.write(";\n");
            }
            // 252, 24
            jamonWriter.write("      int(");
            // 253, 11
            org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getImplementationWidth()), jamonWriter);
            // 253, 45
            jamonWriter.write(") reg_read = reg & ~");
            // 253, 65
            org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getName()), jamonWriter);
            // 253, 84
            jamonWriter.write("_WO_MASK;\n\n      [ rw == 0 ->\n");
            // 256, 18
            if (reg.getEntryWidth() > 1 )
            {
              // 256, 49
              jamonWriter.write("        [ ");
              // 258, 20
              for (int i=0; i<Math.ceil(1.0*reg.getEntryWidth()/reg.getAtomicWidth()); i++ )
              {
                // 258, 100
                jamonWriter.write("atomic_word == ");
                // 258, 115
                org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(i), jamonWriter);
                // 258, 122
                jamonWriter.write(" -> ");
                // 259, 1
                int max = Math.min(reg.getAtomicWidth()*32*(i+1) - 1, reg.getImplementationWidth()-1); 
                // 260, 1
                int min = reg.getAtomicWidth()*32*(i); 
                // 260, 49
                jamonWriter.write("data = reg_read{");
                // 261, 17
                org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(max), jamonWriter);
                // 261, 26
                jamonWriter.write(":");
                // 261, 27
                org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(min), jamonWriter);
                // 261, 36
                jamonWriter.write("}\n        []");
              }
              // 263, 27
              jamonWriter.write("else -> skip ];\n");
            }
            // 264, 18
            else
            {
              // 264, 25
              jamonWriter.write("        data = reg_read\n");
            }
            // 266, 24
            jamonWriter.write("      []else ->\n        [ ");
            // 269, 20
            for (int i=0; i<Math.ceil(1.0*reg.getEntryWidth()/reg.getAtomicWidth()); i++ )
            {
              // 269, 100
              jamonWriter.write("atomic_word == ");
              // 269, 115
              org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(i), jamonWriter);
              // 269, 122
              jamonWriter.write(" -> ");
              // 270, 1
              int max = Math.min(reg.getAtomicWidth()*32*(i+1) - 1, reg.getImplementationWidth()-1); 
              // 271, 1
              int min = reg.getAtomicWidth()*32*(i); 
              // 271, 49
              jamonWriter.write("data_atomic{");
              // 272, 13
              org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(max), jamonWriter);
              // 272, 22
              jamonWriter.write(":");
              // 272, 23
              org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(min), jamonWriter);
              // 272, 32
              jamonWriter.write("} = data;\n          <i:");
              // 273, 14
              org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(min), jamonWriter);
              // 273, 23
              jamonWriter.write("..");
              // 273, 25
              org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(max), jamonWriter);
              // 273, 34
              jamonWriter.write(":( regWriteBit(i,\n            ");
              // 274, 13
              org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getName()), jamonWriter);
              // 274, 32
              jamonWriter.write("_RW_MASK | ");
              // 274, 43
              org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getName()), jamonWriter);
              // 274, 62
              jamonWriter.write("_RV_MASK | ");
              // 274, 73
              org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getName()), jamonWriter);
              // 274, 92
              jamonWriter.write("_WO_MASK,\n            ");
              // 275, 13
              org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getName()), jamonWriter);
              // 275, 32
              jamonWriter.write("_RO_MASK,\n            ");
              // 276, 13
              org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getName()), jamonWriter);
              // 276, 32
              jamonWriter.write("_CW_MASK,\n            ");
              // 277, 13
              org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getName()), jamonWriter);
              // 277, 32
              jamonWriter.write("_CW1_MASK,\n            data_atomic, reg); )>\n        []");
            }
            // 280, 27
            jamonWriter.write("else -> skip ];\n      ];\n");
            // 282, 21
            if (reg.isStructure() )
            {
              // 282, 46
              jamonWriter.write("      unpack(s");
              // 283, 15
              org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(index), jamonWriter);
              // 283, 26
              jamonWriter.write(", reg);\n");
            }
            // 284, 21
            else
            {
              // 284, 28
              jamonWriter.write("      s");
              // 285, 8
              org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(index), jamonWriter);
              // 285, 19
              jamonWriter.write(" = reg;\n");
            }
            // 286, 27
            jamonWriter.write("    );\n");
          }
        }
        // 288, 14
        jamonWriter.write("\n    function manage");
        // 292, 20
        org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(camelCaseBaseName), jamonWriter);
        // 292, 43
        jamonWriter.write("Registers(int(1) -rw; int(16) -chip_addr; int(32) -+data; ");
        // 292, 101
        org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(camelCaseBaseName), jamonWriter);
        // 292, 124
        jamonWriter.write("Registers -+s) = (\n      int(32) offset;\n      #[regRange(chip_addr, ");
        // 294, 29
        org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(base.getFullName()), jamonWriter);
        // 294, 53
        jamonWriter.write(", ");
        // 294, 55
        org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(base.getName()), jamonWriter);
        // 294, 75
        jamonWriter.write("_SIZE, offset) ->\n        #[");
        // 296, 1
        boolean first_a = true; 
        // 297, 1
        for (Register reg : base.getRegisters() )
        {
          // 297, 44
          if (reg.getAlias() == null )
          {
            // 298, 1
            String index; 
            // 299, 1
            org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(first_a ? "" : "        []"), jamonWriter);
            // 299, 34
            first_a=false; 
            // 299, 58
            jamonWriter.write("addressIs");
            // 300, 10
            org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(Utility.underscoreToCamelCase(reg.getName(), true)), jamonWriter);
            // 300, 66
            jamonWriter.write("(chip_addr) ->\n          manageReg");
            // 301, 20
            org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(Utility.underscoreToCamelCase(reg.getName(), true)), jamonWriter);
            // 301, 76
            jamonWriter.write("(rw, chip_addr, data, s::");
            // 301, 101
            org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getName().toLowerCase()), jamonWriter);
            // 301, 134
            jamonWriter.write(")\n");
          }
        }
        // 302, 14
        jamonWriter.write("        ]\n      ]\n    );\n\n    // Will be deprecated in favor of the manageRegisters function above\n    function rw");
        // 310, 16
        org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(camelCaseBaseName), jamonWriter);
        // 310, 39
        jamonWriter.write("Registers(int(1) -rw; int -addr; int -+data;\n                               ");
        // 311, 32
        org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(camelCaseBaseName), jamonWriter);
        // 311, 55
        jamonWriter.write("Registers -+s) = (\n      int reg;              // packed register value\n      int(32) i, i0, i1, i2, word, offset;  // indices\n      #[regRange(addr, ");
        // 314, 24
        org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(base.getFullName()), jamonWriter);
        // 314, 48
        jamonWriter.write(", ");
        // 314, 50
        org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(base.getName()), jamonWriter);
        // 314, 70
        jamonWriter.write("_SIZE, offset) ->\n        #[");
        // 316, 1
        boolean first = true; 
        // 317, 14
        for (Register reg : base.getRegisters() )
        {
          // 317, 57
          if (reg.getAlias() == null )
          {
            // 318, 1
            String index; 
            // 319, 1
            org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(first ? "" : "        []"), jamonWriter);
            // 319, 32
            first=false; 
            // 320, 18
            if (reg.getNumEntries() == 1 )
            {
              // 320, 75
              jamonWriter.write("addrMatch(offset,\n              ");
              // 322, 15
              org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getName()), jamonWriter);
              // 322, 34
              jamonWriter.write("_ADDR,\n              ");
              // 323, 15
              org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getName()), jamonWriter);
              // 323, 34
              jamonWriter.write("_BITS,\n              word) ->\n");
              // 325, 1
              index = ""; 
            }
            // 326, 18
            else if (reg.getNumEntries1() == 1 )
            {
              // 326, 55
              jamonWriter.write("addrMatch1D(offset,\n              ");
              // 328, 15
              org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getName()), jamonWriter);
              // 328, 34
              jamonWriter.write("_BASE,\n              ");
              // 329, 15
              org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getName()), jamonWriter);
              // 329, 34
              jamonWriter.write("_ENTRIES,\n              ");
              // 330, 15
              org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getName()), jamonWriter);
              // 330, 34
              jamonWriter.write("_STRIDE,\n              ");
              // 331, 15
              org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getName()), jamonWriter);
              // 331, 34
              jamonWriter.write("_BITS,\n              i, word) ->\n");
              // 333, 1
              index = "[i]"; 
            }
            // 334, 18
            else if (reg.getNumEntries2() == 1 )
            {
              // 334, 55
              jamonWriter.write("addrMatch2D(offset,\n              ");
              // 336, 15
              org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getName()), jamonWriter);
              // 336, 34
              jamonWriter.write("_BASE,\n              ");
              // 337, 15
              org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getName()), jamonWriter);
              // 337, 34
              jamonWriter.write("_ENTRIES_0,\n              ");
              // 338, 15
              org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getName()), jamonWriter);
              // 338, 34
              jamonWriter.write("_ENTRIES_1,\n              ");
              // 339, 15
              org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getName()), jamonWriter);
              // 339, 34
              jamonWriter.write("_STRIDE_0,\n              ");
              // 340, 15
              org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getName()), jamonWriter);
              // 340, 34
              jamonWriter.write("_STRIDE_1,\n              ");
              // 341, 15
              org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getName()), jamonWriter);
              // 341, 34
              jamonWriter.write("_BITS,\n              i0, i1, word) ->\n");
              // 343, 1
              index = "[i1, i0]"; 
            }
            // 344, 18
            else
            {
              // 344, 25
              jamonWriter.write("addrMatch3D(offset,\n              ");
              // 346, 15
              org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getName()), jamonWriter);
              // 346, 34
              jamonWriter.write("_BASE,\n              ");
              // 347, 15
              org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getName()), jamonWriter);
              // 347, 34
              jamonWriter.write("_ENTRIES_0,\n              ");
              // 348, 15
              org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getName()), jamonWriter);
              // 348, 34
              jamonWriter.write("_ENTRIES_1,\n              ");
              // 349, 15
              org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getName()), jamonWriter);
              // 349, 34
              jamonWriter.write("_ENTRIES_2,\n              ");
              // 350, 15
              org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getName()), jamonWriter);
              // 350, 34
              jamonWriter.write("_STRIDE_0,\n              ");
              // 351, 15
              org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getName()), jamonWriter);
              // 351, 34
              jamonWriter.write("_STRIDE_1,\n              ");
              // 352, 15
              org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getName()), jamonWriter);
              // 352, 34
              jamonWriter.write("_STRIDE_2,\n              ");
              // 353, 15
              org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getName()), jamonWriter);
              // 353, 34
              jamonWriter.write("_BITS,\n              i0, i1, i2, word) ->\n");
              // 355, 1
              index = "[i2, i1, i0]"; 
            }
            // 358, 18
            if (reg.isStructure() )
            {
              // 358, 43
              jamonWriter.write("            reg = pack(s::");
              // 359, 27
              org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getName().toLowerCase()), jamonWriter);
              // 359, 60
              org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(index), jamonWriter);
              // 359, 71
              jamonWriter.write(");\n");
            }
            // 360, 24
            jamonWriter.write("            regReadWrite(rw, word,\n              ");
            // 362, 15
            org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getName()), jamonWriter);
            // 362, 34
            jamonWriter.write("_ATOMIC_WIDTH,\n              ");
            // 363, 15
            org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getName()), jamonWriter);
            // 363, 34
            jamonWriter.write("_RW_MASK | ");
            // 363, 45
            org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getName()), jamonWriter);
            // 363, 64
            jamonWriter.write("_RV_MASK,\n              ");
            // 364, 15
            org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getName()), jamonWriter);
            // 364, 34
            jamonWriter.write("_RO_MASK,\n              ");
            // 365, 15
            org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getName()), jamonWriter);
            // 365, 34
            jamonWriter.write("_CW_MASK,\n              ");
            // 366, 15
            org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getName()), jamonWriter);
            // 366, 34
            jamonWriter.write("_CW1_MASK,\n              data, ");
            // 367, 21
            if (reg.isStructure() )
            {
              // 367, 46
              jamonWriter.write("reg");
            }
            // 367, 49
            else
            {
              // 367, 56
              jamonWriter.write("s::");
              // 367, 59
              org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getName().toLowerCase()), jamonWriter);
              // 367, 92
              org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(index), jamonWriter);
            }
            // 367, 109
            jamonWriter.write(");\n");
            // 368, 18
            if (reg.isStructure() )
            {
              // 368, 43
              jamonWriter.write("            unpack(s::");
              // 369, 23
              org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(reg.getName().toLowerCase()), jamonWriter);
              // 369, 56
              org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(index), jamonWriter);
              // 369, 67
              jamonWriter.write(", reg)\n");
            }
          }
        }
        // 371, 27
        jamonWriter.write("        ]\n      ]\n    );\n\n");
        // 377, 1
        {
          // 377, 1
          __jamon_innerUnit__registerInit(jamonWriter, registers, camelCaseBaseName );
        }
        // 377, 77
        jamonWriter.write("\n  }\n}\n");
      }
    }
    // 382, 8
    jamonWriter.write("\n");
  }
  
  
  // 120, 1
  private void __jamon_innerUnit__structure(final java.io.Writer jamonWriter, final RegisterStruct rs)
    throws java.io.IOException
  {
    // 121, 34
    jamonWriter.write("    structure Reg");
    // 122, 18
    org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(Utility.underscoreToCamelCase(rs.getName(), true)), jamonWriter);
    // 122, 73
    jamonWriter.write(" = (\n");
    // 123, 1
    if (rs.getSortedFields() != null )
    {
      // 124, 1
      if ((rs instanceof Register) && ( ((Register)rs).getImplementationWidth() > ((Register)rs).getNumberFieldBits() ) )
      {
        // 124, 118
        jamonWriter.write("      int(");
        // 125, 11
        org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(((Register)rs).getImplementationWidth() - ((Register)rs).getNumberFieldBits()), jamonWriter);
        // 125, 94
        jamonWriter.write(") RESERVED_IMPLEMENTATION_BITS;\n");
      }
      // 127, 1
      for (RegisterField field : rs.getSortedFields(true) )
      {
        // 127, 56
        jamonWriter.write("      ");
        // 128, 7
        org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(field.dataType.toCspType(field.len)), jamonWriter);
        // 128, 48
        jamonWriter.write(" ");
        // 128, 49
        org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(field.desc), jamonWriter);
        // 128, 65
        if (field.entries>1 )
        {
          // 128, 88
          jamonWriter.write("[");
          // 128, 89
          org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(field.baseEntry), jamonWriter);
          // 128, 110
          jamonWriter.write("..");
          // 128, 112
          org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(field.entries-1), jamonWriter);
          // 128, 133
          jamonWriter.write("]");
        }
        // 128, 140
        jamonWriter.write(";\n");
      }
    }
    // 130, 1
    else
    {
      // 130, 8
      jamonWriter.write("      // ERROR: field overlap\n");
    }
    // 132, 7
    jamonWriter.write("    );\n");
  }
  
  
}
