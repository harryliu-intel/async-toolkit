// Autogenerated Jamon implementation
// /nfs/site/disks/wdisk.55/rliu68/reg-rrc-1/shared/java/src/./com/fulcrummicro/hw/verification/lib/constants/TemplateVerilog.jamon

package com.fulcrummicro.hw.verification.lib.constants;

// 2, 1
import java.util.Collection;
// 3, 1
import com.fulcrummicro.util.misc.Utility;
// 4, 1
import com.fulcrummicro.hw.verification.lib.constants.*;

public class TemplateVerilogImpl
  extends org.jamon.AbstractTemplateImpl
  implements com.fulcrummicro.hw.verification.lib.constants.TemplateVerilog.Intf

{
  private final Collection<ConstantsCell> cells;
  protected static com.fulcrummicro.hw.verification.lib.constants.TemplateVerilog.ImplData __jamon_setOptionalArguments(com.fulcrummicro.hw.verification.lib.constants.TemplateVerilog.ImplData p_implData)
  {
    return p_implData;
  }
  public TemplateVerilogImpl(org.jamon.TemplateManager p_templateManager, com.fulcrummicro.hw.verification.lib.constants.TemplateVerilog.ImplData p_implData)
  {
    super(p_templateManager, __jamon_setOptionalArguments(p_implData));
    cells = p_implData.getCells();
  }
  
  @Override public void renderNoFlush(final java.io.Writer jamonWriter)
    throws java.io.IOException
  {
    // 8, 9
    jamonWriter.write("// INTEL TOP SECRET\n// Copyright ");
    // 10, 14
    org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(java.util.Calendar.getInstance().get(java.util.Calendar.YEAR)), jamonWriter);
    // 10, 81
    jamonWriter.write(" Intel Corporation. All Rights Reserved.\n// $Id:  $\n// DO NOT EDIT! Automatically generated from constant xml.\n\n");
    // 14, 1
    for (ConstantsCell cell : cells )
    {
      // 14, 36
      jamonWriter.write("package ");
      // 15, 9
      org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(cell.name.toLowerCase()), jamonWriter);
      // 15, 38
      jamonWriter.write("_pkg;");
      // 15, 43
      org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(cell.getCastDescription()), jamonWriter);
      // 15, 74
      jamonWriter.write("\n");
      // 16, 1
      for (ConstantsCell c : cell.getUsedCells() )
      {
        // 16, 47
        jamonWriter.write("  import ");
        // 17, 10
        org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(c.name.toLowerCase()), jamonWriter);
        // 17, 36
        jamonWriter.write("_pkg::*;\n");
      }
      // 18, 8
      jamonWriter.write("\n");
      // 20, 1
      for (ConstantsConstant c : cell.constants )
      {
        // 20, 46
        jamonWriter.write("  localparam ");
        // 21, 14
        org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(String.format("%-21s", c.getName())), jamonWriter);
        // 21, 55
        jamonWriter.write(" = ");
        // 21, 58
        org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(String.format("%5s", c.getVerilogValue())), jamonWriter);
        // 21, 105
        jamonWriter.write(";");
        // 21, 106
        org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(c.getCastDescription()), jamonWriter);
        // 21, 134
        jamonWriter.write("\n");
      }
      // 22, 8
      jamonWriter.write("\n");
      // 24, 1
      for (ConstantsEnum e : cell.enums )
      {
        // 25, 1
        if (e.getSize() == 1 )
        {
          // 25, 25
          jamonWriter.write("  typedef enum logic {\n");
        }
        // 27, 1
        else
        {
          // 27, 8
          jamonWriter.write("  typedef enum logic [");
          // 28, 23
          org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(e.getSize()-1), jamonWriter);
          // 28, 42
          jamonWriter.write(":0] {\n");
        }
        // 30, 1
        for (ConstantsEnumValue c : e.values )
        {
          // 30, 41
          jamonWriter.write("    ");
          // 31, 5
          org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(String.format("%-20s", c.getFullName())), jamonWriter);
          // 31, 50
          jamonWriter.write(" = ");
          // 31, 53
          org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(String.format("%5d", c.getEncoding())), jamonWriter);
          // 31, 96
          jamonWriter.write(",");
          // 31, 97
          org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(c.getCastDescription()), jamonWriter);
          // 31, 125
          jamonWriter.write("\n");
        }
        // 32, 8
        jamonWriter.write("    XPROP_");
        // 33, 11
        org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(e.getName()), jamonWriter);
        // 33, 28
        jamonWriter.write(" = ");
        // 33, 31
        org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(e.getVerilogX()), jamonWriter);
        // 33, 52
        jamonWriter.write("\n  } ");
        // 34, 5
        org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(e.getStructName()), jamonWriter);
        // 34, 28
        jamonWriter.write(";");
        // 34, 29
        org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(e.getCastDescription()), jamonWriter);
        // 34, 57
        jamonWriter.write("\n\n");
      }
      // 37, 1
      for (ConstantsChannel channel : cell.channels )
      {
        // 37, 50
        jamonWriter.write("  typedef struct packed {\n");
        // 39, 1
        for (ConstantsChannelField f : channel.fields.descendingSet() )
        {
          // 39, 66
          jamonWriter.write("    ");
          // 40, 5
          org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(f.getVerilogFullTypeString()), jamonWriter);
          // 40, 39
          jamonWriter.write(" ");
          // 41, 1
          org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(String.format("%-15s", f.getName().toLowerCase() + ";")), jamonWriter);
          // 42, 1
          org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(f.getCastDescription()), jamonWriter);
          // 42, 29
          jamonWriter.write("\n");
        }
        // 43, 8
        jamonWriter.write("  } ");
        // 44, 5
        org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(channel.getStructName()), jamonWriter);
        // 44, 34
        jamonWriter.write(";");
        // 44, 35
        org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(channel.getCastDescription()), jamonWriter);
        // 44, 69
        jamonWriter.write("\n  localparam ");
        // 45, 14
        org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(String.format(" W_%-18s", channel.getName())), jamonWriter);
        // 45, 64
        jamonWriter.write(" = ");
        // 45, 67
        org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(String.format("%5d", channel.getWidth())), jamonWriter);
        // 45, 113
        jamonWriter.write(";\n  localparam ");
        // 46, 14
        org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(String.format("WD_%-18s", channel.getName())), jamonWriter);
        // 46, 64
        jamonWriter.write(" = ");
        // 46, 67
        org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(String.format("%5d", (int)Math.ceil(channel.getWidth()/2.0))), jamonWriter);
        // 46, 133
        jamonWriter.write(";\n\n");
      }
      // 48, 8
      jamonWriter.write("endpackage\n\n\n");
    }
    // 52, 25
    jamonWriter.write("\n//////////////////////////////////////////////////////////////////////////////\n// Legacy constants\n// DEPRECATED - do not use in new code\n\n");
    // 58, 1
    for (ConstantsCell cell : cells )
    {
      // 59, 1
      if (cell.hasPrefix() )
      {
        // 60, 1
        for (ConstantsConstant c : cell.constants )
        {
          // 60, 46
          org.jamon.escaping.Escaping.HTML.write(org.jamon.emit.StandardEmitter.valueOf(c.toVerilog()), jamonWriter);
        }
      }
    }
  }
  
  
}
